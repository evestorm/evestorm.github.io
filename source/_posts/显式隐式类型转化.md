---
title: æ˜¾å¼éšå¼ç±»å‹è½¬åŒ–
tags:
  - ç¬”è®°
categories:
  - å‰ç«¯
  - JS
  - ECMAScript
abbrlink: 48513
date: 2021-08-07 20:30:09
top: 
---

# æ˜¾ç¤º/éšå¼ç±»å‹è½¬æ¢

## æ˜¾ç¤ºç±»å‹è½¬æ¢

### ğŸ’„Number() æŠŠå€¼è½¬ä¸ºæ•°å­—

- å¦‚æœå‚æ•°æ— æ³•è¢«è½¬ä¸ºæ•°å­—ï¼Œåˆ™è¿”å› NaN
- ''ã€'   ', '0'ã€falseã€nullã€[] ã€ ç­‰è¿”å› 0
- {}ã€undefined è¢«è½¬ä¸º NaN
- æ•°å­—æ‰“å¤´ï¼Œä½†åŒ…å«å…¶ä»–å­—ç¬¦çš„ï¼Œä¹Ÿè¿”å› NaN
- ç‰¹ç‚¹ï¼š
   - ç›¸æ¯” parseInt æ›´å®½æ¾ï¼Œfalse,trueèƒ½è½¬
   - ä½†ç±»ä¼¼ '1a' è¿™ç§ï¼Œä¼š NaN

<!-- more -->

```javascript
var a = '123';
console.log(typeof(Number(a)) + '-' + Number(a)); // number-123

a = '3.14';
console.log(typeof(Number(a)) + '-' + Number(a)); // number-3.14
```
```javascript
a = 'true';
console.log(typeof(Number(a)) + '-' + Number(a)); // number-NaN
// hint: éæ•°

a = 'a';
console.log(typeof(Number(a)) + '-' + Number(a)); // number-NaN
// hint: éæ•°

a = '1a';
console.log(typeof(Number(a)) + '-' + Number(a)); // number-NaN
// hint: éæ•°
```

```javascript
Number("0"); // 0
Number(""); // 0
Number("   "); // 0
Number(null); // 0
Number(false); // 0
Number([]); // 0
Number("\n"); // 0
Number("\t"); // 0

Number(true); // 1
Number('true'); // NaN

Number(undefined); // NaN
Number({}); // NaN
Number("x"); // NaN
```


### ğŸ’„parseInt æŠŠå€¼è½¬ä¸ºä¸€ä¸ªæ•´æ•°

- string è¦è¢«è§£æçš„å€¼ã€‚å¦‚æœå‚æ•°ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²(ä½¿ç”¨ Â `[ToString](https://www.ecma-international.org/ecma-262/6.0/#sec-tostring)` æŠ½è±¡æ“ä½œ)ã€‚å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½ç¬¦å°†ä¼šè¢«å¿½ç•¥ã€‚
- radix ä»Â `2`Â åˆ°Â `36`ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²çš„åŸºæ•°ã€‚ä¾‹å¦‚æŒ‡å®šÂ 16Â è¡¨ç¤ºè¢«è§£æå€¼æ˜¯åå…­è¿›åˆ¶æ•°ã€‚
- å½“radixä¸å¡«å†™æ—¶é»˜è®¤å½“åšåè¿›åˆ¶å¤„ç†ï¼Œä½†æ³¨æ„10å¹¶ä¸æ˜¯é»˜è®¤å€¼ï¼Œå½“å­—ç¬¦ä¸²ä»¥0xå¼€å¤´æ˜¯ä¼šç›´æ¥å¤„ç†ä¸º16è¿›åˆ¶
   - `parseInt("123", 16) === parseInt("0x123")`Â 
- trueã€falseã€''ã€nullã€undefinedã€NaNã€[]ã€{} éƒ½è½¬ä¸º NaN
- å¦‚æœæ•°å­—å’Œå­—ç¬¦ä¸²æ··åˆï¼Œå­—ç¬¦ä¸²åœ¨å‰ï¼Œè½¬ä¸ºNaNï¼›æ•°å­—åœ¨å‰ï¼Œå–æ•°å­—ï¼Œç›´åˆ°ä¸æ˜¯æ•°å­—ä¸ºæ­¢
- ç‰¹ç‚¹ï¼š
   - ç›¸æ¯” Numberï¼Œæ›´ä¸¥æ ¼ï¼Œfalse, trueéƒ½ä¼š NaN
   - ä½† '1a' è¿™ç§å´èƒ½å¤„ç†ï¼Œå˜æˆ 1ï¼ˆä¹Ÿå°±æ˜¯è§£æåˆ°ä¸èƒ½è§£æä¸ºæ­¢ï¼‰


```javascript
var a = '123';
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-123

a = true;
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-NaN
// hint: åªç®¡æŠŠæ•°å­—è½¬ä¸ºæ•´å‹ï¼Œéæ•°éƒ½æ˜¯ NaN

a = null;
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-NaN
// hint: åŒä¸Š

a = undefined;
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-NaN

a = NaN;
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-NaN

a = '3.14'
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-3
// hint: ç›´æ¥æŠŠå°æ•°ç‚¹æ‰”æ‰

a = 'abc123';
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-NaN
// hint: éæ•°

a = '123abc';
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-123
// hint: å¦‚æœæ•°å­—å’Œå­—ç¬¦ä¸²æ··åˆï¼Œå­—ç¬¦ä¸²åœ¨å‰ï¼Œè½¬ä¸ºéæ•°ï¼›æ•°å­—åœ¨å‰ï¼Œè½¬åˆ°ä¸‹ä¸€ä¸ªä¸æ˜¯æ•°å­—ä¸ºæ­¢çš„æ•°å­—

a = '123.22abc';
console.log(typeof(parseInt(a)) + '-' + parseInt(a)); // number-123
```

```javascript
var a = '10';
console.log(parseInt(a, 16)); // 16
// hint: ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŸºåº•ï¼ŒæŠŠxxè¿›åˆ¶çš„aè½¬ä¸º10è¿›åˆ¶ xxèŒƒå›´ 2~36
// ä¹Ÿå°±æ˜¯æŒ‰ç…§æ•° 16 æ¬¡è¿› 1 çš„è¯´æ³•ï¼Œç®—æˆåè¿›åˆ¶çš„æ•° 10 å°±åº”è¯¥æ˜¯ 16
// ä¹Ÿå°±æ˜¯16è¿›åˆ¶çš„16æ‰ç­‰äº10è¿›åˆ¶çš„10

var a = 'b';
console.log(parseInt(a, 16));
// hint: 0123456789abcdef
// ç¬¬ 0 ä½ï¼šb * 16 ^ 0 = 11 * 1 = 11
```
```javascript
parseInt('123', 5); // æŠŠ '123' çœ‹åš5è¿›åˆ¶çš„æ•°ï¼Œè¿”å›åè¿›åˆ¶çš„æ•°38
// => 1 * 5 ^ 2 + 2 * 5 ^ 1 + 3 * 5 ^ 0 = 25+10+3 = 38
```

```javascript
parseInt(123)
123
parseInt("123")
123
parseInt("12a") //aä¸èƒ½è§£ææˆæ•´æ•°äº†
12
parseInt("a12a") //ç¬¬ä¸€ä¸ªä½ç½®å°±ä¸èƒ½è§£æäº†
NaN
```

```javascript
parseInt(12,0) //12 10è¿›åˆ¶ä¸º12
12
parseInt(12,5) //12 5è¿›åˆ¶ä¸º7
7
parseInt(12,8) //12 8è¿›åˆ¶ä¸º10
10
parseInt(112,2) //112 2è¿›åˆ¶ï¼Œå‰ä¸¤ä½æ˜¯å¯ä»¥è§£æçš„ï¼Œç¬¬ä¸‰ä½ä¸èƒ½è§£æï¼Œ2è¿›åˆ¶åªæœ‰0 1
3
parseInt(112,1) // 1è¿›åˆ¶åªæœ‰0ï¼Œç¬¬ä¸€ä½å°±ä¸èƒ½è§£æ
NaN
parseInt(123,3) // 123 ä¸­ 12 å¯ä»¥è§£æï¼Œ3è¿›åˆ¶ä¸º5
5
```

### parseFloat æŠŠå€¼è½¬ä¸ºæµ®ç‚¹æ•°

```javascript
var a = '3.1415926';
console.log(typeof(parseFloat(a)) + '-' + parseFloat(a)); // number-3.1415926

a = '3';
console.log(typeof(parseFloat(a)) + '-' + parseFloat(a)); // number-3

a = '3.14aab';
console.log(typeof(parseFloat(a)) + '-' + parseFloat(a)); // number-3.14
```

```javascript
var num = parseFloat('3.1415926'); // 3.1415926
console.log(num.toFixed(2)) // 3.14

console.log(3.14621.toFixed(2)) // 3.15
// hint: å››èˆäº”å…¥
```

### ğŸ’„Boolean è½¬å¸ƒå°”å€¼

- falseã€''ã€0ã€undefinedã€nullã€NaN


```javascript
Boolean(null) // false

// 0 "" undefined null NaN false éƒ½è½¬ä¸º false
// å…¶ä½™éƒ½æ˜¯ true
```

### isNaN æ˜¯å¦ä¸ºNaN

```javascript
console.log(isNaN(NaN)); // true
console.log(isNaN(123)); // false

console.log(isNaN('a')); // true
// hint: 'a'æ˜¯éæ•°ï¼Œè½¬ä¸äº†numberï¼Œå°±æ˜¯NaN

console.log(isNaN('NaN'));
// true å…¨å±€isNaN å­—ç¬¦ä¸²éæ•°å°±æ˜¯NaN
console.log(Number.isNaN("NaN"));
// false Numberä¸‹çš„isNaNï¼Œä¸ä¼šéšå¼è½¬åŒ–


console.log(isNaN(null)); // false
// hint: Number(null) -> 0, 0æ˜¯æ•°å­—ï¼Œä¸æ˜¯NaN

console.log(isNaN(undefined)); // true
// hint: Number(undefined) -> NaN
```

## éšå¼ç±»å‹è½¬æ¢

### å‰ç½®çŸ¥è¯†

#### ğŸ’„JS 8ç§å†…ç½®ç±»å‹

- Number
- String
- Boolean
- Undefined
- null
- **Object**ï¼ˆå‡½æ•°ã€æ•°ç»„éƒ½æ˜¯Objectçš„å­ç±»å‹ï¼‰
- Symbol ï¼ˆES2015ï¼‰
- BigIntï¼ˆESNext stage 4ï¼‰

ç±»å‹åˆ†ä¸º åŸºæœ¬ç±»å‹ å’Œ å¤åˆç±»å‹ ï¼Œé™¤äº†å¯¹è±¡ï¼Œå…¶ä»–éƒ½æ˜¯åŸºæœ¬ç±»å‹ã€‚

#### ToPrimitive - å°†ä»»æ„å€¼è½¬ä¸ºåŸå§‹å€¼

è½¬æ¢è§„åˆ™ï¼š

1. å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ä¸å¤„ç†
2. è°ƒç”¨ `valueOf()`Â ï¼Œå¹¶ç¡®ä¿è¿”å›å€¼æ˜¯åŸºæœ¬ç±»å‹
3. å¦‚æœæ²¡æœ‰ `valueOf`Â è¿™ä¸ªæ–¹æ³•æˆ–è€… `valueOf`Â è¿”å›çš„ç±»å‹ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆå¯¹è±¡ä¼šç»§ç»­è°ƒç”¨ `toString()`Â æ–¹æ³•
4. å¦‚æœåŒæ—¶æ²¡æœ‰ `valueOf`Â å’Œ `toString()`Â æ–¹æ³•ï¼Œæˆ–è€…è¿”å›çš„éƒ½ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆç›´æ¥æŠ›å‡º `TypeError`Â å¼‚å¸¸


> æ³¨æ„ï¼š å¦‚æœ **preferedType=string**ï¼Œé‚£ä¹ˆ 2ï¼Œ3 é¡ºåºè°ƒæ¢


è½¬æ¢å®ç°ï¼š

| å¯¹è±¡ | valueOf() | toString() | é»˜è®¤ preferedType |
| --- | --- | --- | --- |
| Object | åŸå€¼ | "[object Object]" | Number |
| Function | åŸå€¼ | "function xyz() {...}" | Number |
| Array | åŸå€¼ | "x,y,z" | Number |
| Date | æ•°å­—ï¼ˆ
å­˜å‚¨çš„æ—¶é—´æ˜¯ä» 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œå¼€å§‹è®¡çš„æ¯«ç§’æ•°
ï¼‰e.g.Â 
1628864272562 | "Sat May 22 2021..." | String |



1. æ•°ç»„çš„ `toString()` å¯ä»¥ç­‰æ•ˆä¸º `join(",")`Â ï¼Œé‡åˆ° nullã€undefined éƒ½è¢«å¿½ç•¥ï¼Œé‡åˆ° symbol ç›´æ¥æŠ¥é”™ï¼Œé‡åˆ°æ— æ³• ToPrimitive çš„å¯¹è±¡ä¹ŸæŠ¥é”™
2. ä½¿ç”¨ `æ¨¡æ¿å­—ç¬¦ä¸²`Â æˆ–è€…ä½¿ç”¨ `String(...)`Â åŒ…è£…æ—¶ï¼ŒpreferedType=stringï¼Œå³ä¼˜å…ˆè°ƒç”¨ `.toString()`Â 
3. ä½¿ç”¨ `å‡æ³•`Â æˆ–è€… `Number(...)`Â åŒ…è£…æ—¶ï¼ŒpreferedType=numberï¼Œå³ä¼˜å…ˆè°ƒç”¨ `.valueOf()`Â 


```javascript
[1, null, undefined, 2].toString(); // "1,,,2"

[1, Symbol('x')].toString(); // TypeError: Cannot convert a Symbol value to a string

[1, Object.create(null)].toString(); // VM3251:1 Uncaught TypeError: Cannot convert object to primitive value
```

### åŠ å‡æ³• +ã€-

åŠ å‡æ³•è¿ç®—ä¸­éµå¾ªäº†ä¸€äº›éšå¼è½¬æ¢è§„åˆ™ï¼š

#### é‡åˆ°å¯¹è±¡å…ˆæ‰§è¡ŒToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹

- **åŠ æ³•**ï¼ˆ+ï¼‰è¿ç®—ï¼ŒpreferedTypeæ˜¯é»˜è®¤å€¼
- **å‡æ³•**ï¼ˆ-ï¼‰è¿ç®—ï¼ŒpreferedTypeæ˜¯Number


```javascript
1 + {}; // 1 + ({}).toString() => 1 + "[object Object]" => "1[object Object]"

1 + [2, 3];
// 1 + ([2, 3]).toString(); => 1 + [2, 3].join(",") => 1 + "2,3" => "12,3"

[1] + [2, 3];
// "1" + [2, 3].join(",") => "1" + "2,3" => "12,3"

function test() {};
10 + test;
// 10 + (test).toString() => 10 + "function test() {}" => "10function test() {}"

10 - undefined;
// 10 - Number(undefined) => 10 - NaN => NaN
```

#### å­—ç¬¦ä¸² + ä»»æ„å€¼ï¼ˆåŸºæœ¬ç±»å‹ï¼‰ï¼Œä¼šè¢«å¤„ç†ä¸ºå­—ç¬¦ä¸²çš„æ‹¼æ¥

è¿™é‡Œçš„ä»»æ„å€¼éƒ½æ˜¯æŒ‡åŸºæœ¬ç±»å‹ï¼Œå› ä¸ºå¯¹è±¡ä¼šå…ˆæ‰§è¡ŒToPrimitiveå˜æˆåŸºç¡€ç±»å‹

```javascript
1 + "1"; 																									// (1).toString() + "1" => "1" + "1" => "11"

1 + 1; 																										// 2

"1" + 1; 																									// "1" + (1).toString() => "1" + "1" => "11"

"1" + "1"; 																								// "11"

1 + "1" + 1;																							// (1).toString() + "1" + (1).toString() => "1" + "1" + "1" => "111"

"1" + false; 																							// "1" + "false" => "1false"

"1" + null; 																							// "1" + "null" => "1null"

"X" + undefined + false;																	// "X" + "undefined" + "false" => "Xundefinedfalse"

"X" + {};																									// "X" + ({}).toString() => "X" + "[object Object]" => "X[object Object]"
```

#### éå­—ç¬¦ä¸²ï¼ˆåŸºæœ¬ç±»å‹ï¼‰ + éå­—ç¬¦ä¸²ï¼ˆåŸºæœ¬ç±»å‹ï¼‰ï¼Œä¸¤è¾¹éƒ½ä¼šå…ˆ ToNumber

è¿™é‡Œçš„éå­—ç¬¦ä¸²éƒ½æ˜¯æŒ‡åŸºæœ¬ç±»å‹ï¼Œå› ä¸ºå¯¹è±¡ä¼šå…ˆæ‰§è¡ŒToPrimitiveå˜æˆåŸºç¡€ç±»å‹

```javascript
1 + true; 																// 1 + Number(true) => 1 + 1 => 2

1 + false; 																// 1 + Number(false) => 1 + 0 => 1

1 + null; 																// 1 + Number(null) => 1 + 0 = 1

1 + null + false + 1; 										// 1 + Number(null) + Number(false) => 1 + 0 + 0 + 1 => 2

1 + undefined; 														// 1 + Number(undefined) => NaN

1 + undefined + false;										// 1 + Number(undefined) + Number(false) => 1 + NaN + 0 => NaN

ğŸ’ 1 + undefined + [1];										// 1 + Number(undefined) + ([1]).toString() => 1 + NaN + "1" => "NaN1"

ğŸ’ 1 + undefined + "1";										// 1 + Number(undefined) + "1" => 1 + NaN + "1" => "NaN1"

null + null; 															// Number(null) + Number(null) => 0 + 0 => 0

1 + ![]; 																	// 1 + Number(!Boolean([])) => 1 + Number(!true) => 1 + 0 => 1

1 + !{}; 																	// 1 + Number(!Boolean({})) => 1 + Number(!true) => 1 + 0 => 1

!{} + !{};
                                                            // Number(!Boolean({})) => 
                                                            // Number(!Boolean({})) => 
                                                            // Number(!true) + Number(!true) =>
                                                            // 0 + 0 => 0
```

#### ä»»æ„å€¼ - ä»»æ„å€¼ï¼Œä¸€å¾‹æ‰§è¡Œ ToNumberï¼Œè¿›è¡Œæ•°å­—è¿ç®—

æ­¤æ—¶çš„ preferedType === number

```javascript
3 - 1; 																										// 2

3 - '1'; 																									// 3 - Number('1') => 3 - 1 => 2

'3' - 1; 																									// Number('3') - 1 => 3 - 1 => 2

'3' - '1' - '2'; 																					// Number('3') - Number('1') - Number('2') => 0

3 - []; 																									// 3 - ([]).toString() => 3 - "" => 3 - Number("") => 3 - 0 => 3

3 - {}; 
                                                          // 3 - ({}).toString() => 
                                                          // 3 - "[object Object]" => 
                                                          // 3 - Number("[object Object]") =>
                                                          // 3 - NaN => NaN

var date = new Date();
date.toString(); 																					// "Sun Aug 15 2021 16:05:17 GMT+0800 (China Standard Time)"
date.valueOf(); 																					// 1629014717125

date + 1; 																								// "Sun Aug 15 2021 16:05:17 GMT+0800 (China Standard Time)1"
date - 1; 																								// 1629014717124
```

#### `+ x`Â å’Œ ä¸€å…ƒè¿ç®— `+x`Â æ˜¯ç­‰æ•ˆçš„ï¼ˆä»¥åŠ `-x`ï¼‰ï¼Œéƒ½ä¼šå¼ºåˆ¶ ToNumber

- +xï¼Œxåœ¨åé¢æ‰Numberï¼Œxåœ¨å‰é¢åˆ™ä¸ä¼šå¼ºè½¬Number
- a++ï¼Œä¼šå½“æ•°å­—ç®—


```javascript
+ 0; // 0
- 0; // 0

+ new Date();
// Number(Sun Aug 15 2021 16:09:47 GMT+0800 (China Standard Time)) =>
// 1629014965054

1 + + "1"; // 1 + Number("1") => 1 + 1 => 2

"1" + + "1"; // "1" + Number("1") => "1" + 1 => "11"

1 + + + + ["1"]; // 1 + (+(+(+["1"]))) => 1 + Number(["1"]) => 1 + 1 => 2

1 + - + - [1]; // 1 + (-(+(-[1]))) => 1 + (-(+(-Number([1])))) => 1 + 1 => 2

1 - + - + 1; // 1 - (+(-(+1))) => 1 - (-1) => 2

1 - + - + - 1; // 1 - (+(-(+(-1)))) => 1 - (1) => 0

ğŸ’„1 + + [""]; // 1 + Number([""]) => 1

1 + + ["1", "2"];
// 1 + Number((["1", "2"].toString())) => 
// 1 + Number("1,2") => 
// 1 + NaN =>
// NaN
```

```javascript
var a = '1';
a++;
console.log(a); // 2


var a = '1';
a += 1;
console.log(a); // '11'
```

#### ğŸ’„ç»å…¸é—®é¢˜ [] + {}

```javascript
[] + {};
// ([]).toString() + ({}).toString() => "" + "[object Object]" => "[object Object]"
```

#### {} åœ¨æœ€å‰é¢æ—¶å¯èƒ½ä¸å†æ˜¯å¯¹è±¡

```javascript
{} + []; // 0

{ a: 2 } + []; // 0
```

ç¬¬ä¸€ä¸ªï¼Œè¿™æ—¶ {} å…¶å®ä»£è¡¨çš„æ˜¯ä»£ç å—ï¼Œæœ€åå°±å˜æˆäº† +[]ï¼Œæ ¹æ®å‰é¢çš„åŸåˆ™ï¼Œæ•°ç»„å…ˆè¢«è½¬æ¢æˆå­—ç¬¦ä¸²""ï¼Œæ¥ç€å› ä¸º+xçš„è¿ç®—ï¼Œå­—ç¬¦ä¸²è¢«è½¬æˆæ•°å­—0ã€‚
ç¬¬äºŒä¸ªï¼Œæ­¤æ—¶aä¸æ˜¯ä»£è¡¨å¯¹è±¡å±æ€§ï¼Œè€Œæ˜¯è¢«å½“æˆäº†æ ‡ç­¾ï¼ˆlabelï¼‰ï¼Œæ ‡ç­¾è¿™ä¸œè¥¿IE6å°±å·²ç»æœ‰äº†ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬å†™æˆå¯¹è±¡æ˜¯ä¼šæŠ¥é”™çš„ï¼Œé€—å·è¦æ”¹æˆåˆ†å·æ‰èƒ½é€šè¿‡ç¼–è¯‘ã€‚

```javascript
// Uncaught SyntaxError: Unexpected token ':'
{ a: 2, b: 3 } + []

// åˆ†å·OK
{ a: 2; b: 3 } + [] === 0;
```

âš ï¸æ³¨æ„ï¼šåœ¨ NodeÂ >= 13.10.0Â çš„ç‰ˆæœ¬ï¼Œ`{}`è¢«ä¼˜å…ˆè§£é‡Šä¸ºç©ºå¯¹è±¡ï¼Œä»…åœ¨éå¯¹è±¡ç»“æ„çš„æƒ…å†µæ‰ä¼šè¢«è®¤ä¸ºæ˜¯ä»£ç å—ã€‚

```javascript
// nodeJs >= 13.10.0 çš„è¿è¡Œç»“æœ

{} + []; // "[object Object]";
{ a: 2 } + []; // "[object Object]";
{ a: 2, b: 3 } + []; // "[object Object]";

// æ³¨æ„æ˜¯åˆ†å·ï¼Œå½“æˆä»£ç å—
{ a: 2; b: 3 } + []; // 0
// æœ‰JSè¯­å¥æˆ–è€…è¡¨è¾¾å¼ï¼Œå½“æˆä»£ç å—
{ var a = 1; } + []; // 0
{ ; } + []; // 0
{ 123 } + []; // 0
{ 1 + 2 } + []; // 0
```

å®šè®ºè¿˜æ˜¯ä¸‹çš„å¤ªæ—©äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯æœ‰åŠæ³•è®©å¼•æ“ä¼˜å…ˆå¤„ç†æˆä»£ç å—:

```javascript
// æ‰€æœ‰nodeç‰ˆæœ¬

;{} + [] === 0;
;{ a: 2 } + [] === 0;

// Uncaught SyntaxError: Unexpected token ':'
;{ a: 2, b: 3 } + [];
```

#### symbolä¸èƒ½åŠ å‡

å¦‚æœåœ¨è¡¨è¾¾å¼ä¸­æœ‰symbolç±»å‹ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥æŠ¥é”™ã€‚æ¯”å¦‚`1 + Symbol("x")`æŠ¥é”™å¦‚ä¸‹ï¼š

```javascript
Uncaught TypeError: Cannot convert a Symbol value to a number
```

### ğŸ’„å®½æ¾ç›¸ç­‰

ç›¸å¯¹äºå…¨ç­‰éƒ½éœ€è¦å¯¹ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå½“ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œå®½æ¾ç›¸ç­‰ä¼šè§¦å‘éšå¼è½¬æ¢ã€‚ä¸‹é¢ä»‹ç»è§„åˆ™ï¼š

#### å¯¹è±¡ == å¯¹è±¡ï¼Œç±»å‹ä¸€è‡´åˆ™ä¸åšè½¬æ¢

```javascript
{} != {} // true

[] != {} // true

[] != [] // true
```

#### å¯¹è±¡ == åŸºæœ¬å€¼ï¼Œå¯¹è±¡å…ˆæ‰§è¡ŒToPrimitiveè½¬æ¢ä¸ºåŸºæœ¬ç±»å‹

```javascript
// å°å¿ƒä»£ç å—
"[object Object]" == {}; // ({}).toString() => "[object Object]"
[] == ""; // ([]).toString() => ""
[1] == "1"; // ([1]).toString(); => "1"
[1,2] == "1,2"; // ([1,2]).toString() => "1,2"
```

#### ğŸ’„å¸ƒå°”å€¼ == éå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼å…ˆè½¬æ¢æˆæ•°å­—ï¼Œå†æŒ‰æ•°å­—è§„åˆ™æ“ä½œ

```javascript
[] == false;
// [] => ([]).toString() => "" => Number("") => 0
// false => Number(false) => 0



// [1] => "1" => 1
// true => 1
[1] == true;
// [1] => ([1]).toString() => "1" => Number("1") => 1
// true => Number(true) => 1



[1,2] != true;
// [1,2] => ([1,2]).toString() => "1,2" => Number("1,2") => NaN
// true => Number(true) => 1



"0" == false;
// "0" => Number("0") => 0
// false => Number(false) => 0

"" == false;
// "" => Number("") => 0
// false => Number(false) => 0
```

#### ğŸ’„æ•°å­— == å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ToNumberè½¬æ¢æˆæ•°å­—

```javascript
"2" == 2;
// "2" => Number("2") => 2

"" == 0;
// Number("") => 0

[] == 0;
// [] => ([]).toStirng() => "" => Number("") => 0

[1] == 1;
// [1] => ([1]).toString() => "1" => Number("1") => 1

[1,2] != 1;
// ([1,2]).toString() => "1,2" => Number("1,2") => NaN
```

#### ğŸ’„nullã€undefinedã€symbol

nullã€undefinedä¸ä»»ä½•éè‡ªèº«çš„å€¼å¯¹æ¯”ç»“æœéƒ½æ˜¯falseï¼Œä½†æ˜¯ `null == undefined` æ˜¯ä¸€ä¸ªç‰¹ä¾‹ã€‚

```javascript
null == null;
undefined == undefined;
null == undefined;

null != 0;
null != false;

undefined != 0;
undefined != false;

Symbol('x') != Symbol('x');
```

### æ¯”è¾ƒ < >

å¯¹æ¯”ä¸åƒç›¸ç­‰ï¼Œå¯ä»¥ä¸¥æ ¼ç›¸ç­‰ï¼ˆ===ï¼‰é˜²æ­¢ç±»å‹è½¬æ¢ï¼Œå¯¹æ¯”ä¸€å®šä¼šå­˜åœ¨éšå¼ç±»å‹è½¬æ¢ã€‚

#### å¯¹è±¡æ€»æ˜¯å…ˆæ‰§è¡ŒToPrimitiveä¸ºåŸºæœ¬ç±»å‹

```javascript
[] < []; // false
[] == []; // false
[] <= []; // true
[] >= []; // true
// ([]).toString() => ""

[] <= {}; // true
[] >= {}; // false
[] == {}; // false
[] > {}; // false
[] < {}; // true

// [] => ([]).toString() => ""
// {} => ({}).toString() => "[object Object]"
// "" <= "[object Object]"

{} < {}; // false
{} == {}; // false
{} > {}; // false
{} >= {}; // true
{} <= {}; // true
// {} => ({}).toString() => "[object Object]"
```

#### ğŸ’„ä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²æ—¶æ‰æ¯”è¾ƒUNICodeï¼Œå¦åˆ™ä¸€å¾‹è½¬æ¢æˆæ•°å­—åšå¯¹æ¯”

```javascript
// ["06"] => "06" => 6
["06"] < 2   // false 

["06"] < "2" // true
["06"] > 2   // true

5 > null     // true
-1 < null    // true
0 <= null    // true

0 <= false   // true
0 < false    // false

// undefined => Number(...) => NaN
5 > undefined // false
```

#### ä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæˆ–ä¸¤è¾¹éƒ½æœ€ç»ˆè½¬ä¸ºäº†å­—ç¬¦ä¸²

- ä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æ¯”è¾ƒå­—ç¬¦ä¸²å¯¹åº”çš„ UNICodeç¼–ç 
   - charCodeAt(): å¯ä»¥æ‹¿åˆ°å­—ç¬¦çš„ç¼–ç 
   - å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œæ¥è·å–å­—ç¬¦ä¸²çš„ç¬¬nä½çš„ç¼–ç 
   - {% asset_img charCodeAt.png charCodeAt %}
- å¤šä¸ªå­—ç¬¦ä¸²çš„æ¯”è¾ƒï¼Œä»å·¦åˆ°å³ä¾æ¬¡æ¯”è¾ƒ
   - å¯¹åº”å­—ç¬¦ä¸ç›¸ç­‰ï¼Œç›´æ¥æ¯”è¾ƒå‡ºç»“æœ
   - å¯¹åº”å­—ç¬¦ç›¸ç­‰ï¼Œæ¯”è¾ƒä¸‹ä¸€ä½
   - {% asset_img charCodeAt2.png charCodeAt2 %}


### ğŸ’„æ€»ç»“

å¯¹è±¡éƒ½éœ€è¦å…ˆToPrimitiveè½¬æˆåŸºæœ¬ç±»å‹ï¼Œé™¤éæ˜¯å®½æ¾ç›¸ç­‰ï¼ˆ==ï¼‰æ—¶ä¸¤ä¸ªå¯¹è±¡åšå¯¹æ¯”ã€‚

- + æ²¡æœ‰å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå…¨è½¬æ•°å­—
- - å…¨è½¬æ•°å­—ï¼ŒpreferedType === Number
- == åŒç±»å‹ä¸è½¬ï¼Œæ•°å­—ä¼˜å…ˆï¼Œå¸ƒå°”å…¨è½¬æ•°å­—ï¼Œnullã€undefinedã€symbolä¸è½¬
- < > é™¤éä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¦åˆ™å…¨éƒ¨è½¬ä¸ºæ•°å­—å†æ¯”è¾ƒ
- ++/--è‡ªå¢è‡ªå‡ï¼Œç®—æœ¯è¿ç®—ç¬¦(- * / %)ä¸­ï¼Œå­—ç¬¦ä¸²è½¬number


```javascript
123 + '123'; // '123123'
123 + null; // 123 + Number(null) => 123 + 0 => 123
123 + true; // 123 + Number(true) => 123 + 1 => 124
1 + NaN; // NaN, åªè¦æœ‰ä¸€ä¸ªNaNå°±ä¸ºNaN

'ä½ çš„å²æ•°æ˜¯ï¼š'+10+10; // 'ä½ çš„å²æ•°æ˜¯ï¼š1010'
'ä½ çš„å²æ•°æ˜¯'+(10+10); // 'ä½ çš„å²æ•°æ˜¯ï¼š20'
10+10+'æ˜¯ä½ çš„å²æ•°'; // ä»å·¦åˆ°å³è®¡ç®—, '20æ˜¯ä½ çš„å²æ•°'

123 + {}; // å¯¹è±¡å…ˆè½¬åŸºæœ¬ç±»å‹
// 123 + ({}).toString() => 123 + "[object Object]" => "123[object Object]"


var a = '123';
a++;
console.log(a); // 124
// a++ => 
// a = a + 1; => 
// a = '123' + 1; => 
// a = Number('123') + 1 =>
// a = 124

var a = 'a';
a++;
console.log(a); // NaN
// a = Number('a') + 1 => NaN + 1 => NaN

var a = '3' * 2;
console.log(a); // 6
// Number('3') * 2 => 6

var a = 'b' * 2;
console.log(a); // NaN
// Number('b') * 2 => NaN
```
```javascript
console.log('1' > 2); // false
console.log(1 > '2'); // false
// hint: éƒ½è½¬ä¸º number

console.log('a' > 'b'); // false
// hint: ä¸¤ä¸ªå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œç”¨asciiæ¯”è¾ƒ
// > < = >= <= éƒ½è¦ç»è¿‡ number è½¬æ¢ï¼Œé™¤äº†ä¸¤ä¸ªå­—ç¬¦ä¸²

console.log(1 == '1') // true
console.log(1 != '2') // true
// hint: éƒ½å¾—è½¬ä¸ºæ•°å­—

console.log(1 === '1'); // false
// hint: å…¨ç­‰ä¸è½¬æ¢ï¼Œè¿˜å¾—æ£€æŸ¥æ•°æ®ç±»å‹

console.log(NaN == NaN); // false
// hint: NaNä¸ç­‰äºä»»ä½•ä¸œè¥¿

console.log(2 > 1 > 3); // false
// hint: 2 > 1 -> è¿”å› true -> true > 3 -> false
console.log(2 > 1 == 1); // true
// hint: 2 > 1 -> è¿”å› true -> true == 1 -> éšå¼è½¬æ¢ true = 1


var num = '123';
console.log(typeof(- num) + ':' + - num); // number:-123

console.log(typeof(+ num) + ':' + + num); // number:123

num = 'abc';
console.log(typeof(+ num) + ':' + + num); // number:NaN
```

### èµ„æº

[å…³äºJSéšå¼ç±»å‹è½¬æ¢çš„å®Œæ•´æ€»ç»“](https://segmentfault.com/a/1190000040048164)



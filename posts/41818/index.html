<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-loading-bar.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







  

<link href="https://cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="面试,">










<meta name="description" content="JS类型相关typeof 没定义的变量会报错吗？typeof let定义了的呢？ 未声明的变量使用 typeof 返回字符串 “undefined” typeof 一个 let 定义的变量会因为暂时性死区报错 ReferenceError（前提：let/const 未声明之前赋值或使用）  1234567891011var tmp = 123if (true) &amp;#123;  tmp = &apos;abc">
<meta name="keywords" content="面试">
<meta property="og:type" content="article">
<meta property="og:title" content="JS笔试题（面试系列）">
<meta property="og:url" content="https://evestorm.github.io/posts/41818/index.html">
<meta property="og:site_name" content="EVE">
<meta property="og:description" content="JS类型相关typeof 没定义的变量会报错吗？typeof let定义了的呢？ 未声明的变量使用 typeof 返回字符串 “undefined” typeof 一个 let 定义的变量会因为暂时性死区报错 ReferenceError（前提：let/const 未声明之前赋值或使用）  1234567891011var tmp = 123if (true) &amp;#123;  tmp = &apos;abc">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://user-images.githubusercontent.com/26674103/55368589-3605a000-5525-11e9-8c20-c5aeea6b1880.png">
<meta property="og:updated_time" content="2019-07-30T03:28:00.837Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS笔试题（面试系列）">
<meta name="twitter:description" content="JS类型相关typeof 没定义的变量会报错吗？typeof let定义了的呢？ 未声明的变量使用 typeof 返回字符串 “undefined” typeof 一个 let 定义的变量会因为暂时性死区报错 ReferenceError（前提：let/const 未声明之前赋值或使用）  1234567891011var tmp = 123if (true) &amp;#123;  tmp = &apos;abc">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/26674103/55368589-3605a000-5525-11e9-8c20-c5aeea6b1880.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://evestorm.github.io/posts/41818/">





  <title>JS笔试题（面试系列） | EVE</title>
  








  <meta name="baidu-site-verification" content="BIAVoToLLq">
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband">
    </div>
    <a target="_blank" href="https://github.com/evestorm" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">EVE</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">EVE的个人博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://evestorm.github.io/posts/41818/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lance">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/kitten.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EVE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JS笔试题（面试系列）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-10T05:12:29+08:00">
                2019-06-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/面试/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  36
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="JS类型相关"><a href="#JS类型相关" class="headerlink" title="JS类型相关"></a>JS类型相关</h2><h3 id="typeof-没定义的变量会报错吗？typeof-let定义了的呢？"><a href="#typeof-没定义的变量会报错吗？typeof-let定义了的呢？" class="headerlink" title="typeof 没定义的变量会报错吗？typeof let定义了的呢？"></a>typeof 没定义的变量会报错吗？typeof let定义了的呢？</h3><ul>
<li>未声明的变量使用 typeof 返回字符串 “undefined”</li>
<li>typeof 一个 let 定义的变量会因为暂时性死区报错 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError" target="_blank" rel="noopener">ReferenceError</a>（前提：let/const 未声明之前赋值或使用）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  tmp = <span class="string">'abc'</span> <span class="comment">// ReferenceError: tmp is not defined</span></span><br><span class="line">  <span class="keyword">let</span> tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> tmp) <span class="comment">// ReferenceError: tmp is not defined</span></span><br><span class="line"><span class="keyword">let</span> tmp</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tmp</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> tmp) <span class="comment">// undefined 不会报错</span></span><br></pre></td></tr></table></figure>
<h3 id="typeof-的值有哪些"><a href="#typeof-的值有哪些" class="headerlink" title="typeof 的值有哪些"></a>typeof 的值有哪些</h3><p>7种数据类型（返回的都是字符串形式）：</p>
<p>string, number, function, object, undefined, boolean, symbol（表独一无二的值）</p>
<p>注意：</p>
<ul>
<li>null 和 数组 返回的都是 object</li>
<li>NaN 返回的是 number</li>
</ul>
<h3 id="valueOf-和-toString"><a href="#valueOf-和-toString" class="headerlink" title="valueOf 和 toString"></a>valueOf 和 toString</h3><ul>
<li>toString(): 返回对象的字符串表示。</li>
<li>valueOf(): 返回对象的字符串、数值或布尔值表示。</li>
</ul>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="判断一个单词是否是回文"><a href="#判断一个单词是否是回文" class="headerlink" title="判断一个单词是否是回文"></a>判断一个单词是否是回文</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"mamam"</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkPalindrom</span>(<span class="params">str</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> str === str.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="验证回文字符串"><a href="#验证回文字符串" class="headerlink" title="验证回文字符串"></a>验证回文字符串</h3><p>给定一个字符串，验证它是否是回文串，只考虑字母和数字字符，可以忽略字母的大小写。</p>
<ul>
<li><strong>输入:</strong> “A man, a plan, a canal: Panama”        <strong>输出:</strong> true</li>
<li><strong>输入:</strong> “race a car”                                      <strong>输出:</strong> false</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"A man, a plan, a canal: Panama"</span></span><br><span class="line"><span class="keyword">var</span> isPalindrome = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/[^A-Za-z0-9]/g</span></span><br><span class="line">    <span class="keyword">var</span> tempStr = s.replace(reg, <span class="string">""</span>)</span><br><span class="line">    <span class="keyword">var</span> reverseStr = tempStr.split(<span class="string">""</span>).reverse().join(<span class="string">""</span>)</span><br><span class="line">    <span class="keyword">return</span> reverseStr.toLowerCase() === tempStr.toLowerCase()</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isPalindrome(str))</span><br></pre></td></tr></table></figure>
<h3 id="统计字符串出现最多的字母"><a href="#统计字符串出现最多的字母" class="headerlink" title="统计字符串出现最多的字母"></a>统计字符串出现最多的字母</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"afjghdfraaaasdenas"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMaxDuplicateChar</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str.length == <span class="number">1</span>) <span class="keyword">return</span> str</span><br><span class="line">    <span class="keyword">let</span> charObj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!charObj[str.charAt(i)]) &#123;</span><br><span class="line">            charObj[str.charAt(i)] = <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            charObj[str.charAt(i)] += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> maxChar = <span class="string">''</span>,</span><br><span class="line">        maxValue = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> charObj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (charObj[key] &gt;= maxValue) &#123;</span><br><span class="line">            maxChar = key</span><br><span class="line">            maxValue = charObj[key]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxChar</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="字符串中的第一个唯一字符"><a href="#字符串中的第一个唯一字符" class="headerlink" title="字符串中的第一个唯一字符"></a>字符串中的第一个唯一字符</h3><p>给定一个字符串，找到它的第一个不重复的字符，并返回它的索引。如果不存在，则返回 -1。</p>
<ul>
<li>s = “leetcode”          返回 0.</li>
<li>s = “loveleetcode”    返回 2.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"leetcode"</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">firstUniqChar</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> curChar = str[i]</span><br><span class="line">    <span class="keyword">if</span> (str.lastIndexOf(curChar) === str.indexOf(curChar)) &#123;</span><br><span class="line">      <span class="keyword">return</span> i</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(firstUniqChar(str))</span><br></pre></td></tr></table></figure>
<h3 id="有效的字母异位词"><a href="#有效的字母异位词" class="headerlink" title="有效的字母异位词"></a>有效的字母异位词</h3><p>即判断字符串中是否只有字符的位置不同，也就是判断两个字符串中包含的字符以及这些字符出现的次数是否相同</p>
<ul>
<li><strong>输入:</strong> <em>s</em> = “anagram”, <em>t</em> = “nagaram”        <strong>输出:</strong> true</li>
<li><strong>输入:</strong> <em>s</em> = “rat”, <em>t</em> = “car”                        <strong>输出:</strong> false</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"anagram"</span>, t = <span class="string">"nagaram"</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAnagram</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (s.length !== t.length) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> ss = s.split(<span class="string">""</span>).sort().join(<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">var</span> tt = t.split(<span class="string">""</span>).sort().join(<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">return</span> ss === tt ? <span class="literal">true</span> : <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(isAnagram(s, t))</span><br></pre></td></tr></table></figure>
<h3 id="判断一个给定的字符串是否是同构的"><a href="#判断一个给定的字符串是否是同构的" class="headerlink" title="判断一个给定的字符串是否是同构的"></a>判断一个给定的字符串是否是同构的</h3><blockquote>
<p>输入: s = “egg”, t = “add”<br>输出: true<br>输入: s = “foo”, t = “bar”<br>输出: false</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isIsomorphic = <span class="function"><span class="keyword">function</span>(<span class="params">s, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; s.length) &#123;</span><br><span class="line">      <span class="keyword">if</span> (s.indexOf(s[i]) != t.indexOf(t[i]))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      i++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="报数"><a href="#报数" class="headerlink" title="报数"></a>报数</h3><p>报数序列是一个整数序列，按照其中的整数的顺序进行报数，得到下一个数。其前五项如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.     1</span><br><span class="line">2.     11</span><br><span class="line">3.     21</span><br><span class="line">4.     1211</span><br><span class="line">5.     111221</span><br></pre></td></tr></table></figure>
<p><code>1</code> 被读作  <code>&quot;one 1&quot;</code>  (<code>&quot;一个一&quot;</code>) , 即 <code>11</code>。</p>
<p><code>11</code> 被读作 <code>&quot;two 1s&quot;</code> (<code>&quot;两个一&quot;</code>）, 即 <code>21</code>。</p>
<p><code>21</code> 被读作 <code>&quot;one 2&quot;</code>,  “<code>one 1&quot;</code> （<code>&quot;一个二&quot;</code> ,  <code>&quot;一个一&quot;</code>) , 即 <code>1211</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countAndSay = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 从1开始报数</span></span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">'1'</span></span><br><span class="line">    <span class="comment">// 循环第 N 次</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// 默认当前连续的数字的次数为1</span></span><br><span class="line">        <span class="keyword">var</span> repeatCount = <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> str = <span class="string">''</span></span><br><span class="line">        <span class="comment">// 循环当前数字</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; result.length; j++) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(result[j], result[j + <span class="number">1</span>])</span><br><span class="line">            <span class="comment">// 当前数字和后面一个是否相同，相同则重复数计数+1</span></span><br><span class="line">            <span class="keyword">if</span> (result[j] === result[j+<span class="number">1</span>]) &#123;</span><br><span class="line">                repeatCount++</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 否则就把到目前为止的报数“读出来”</span></span><br><span class="line">                str += repeatCount + result[j]</span><br><span class="line">                repeatCount = <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 当前第N次报数的结果，下次报数以此为准</span></span><br><span class="line">        result = str</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="最长公共前缀"><a href="#最长公共前缀" class="headerlink" title="最长公共前缀"></a>最长公共前缀</h3><p>编写一个函数来查找字符串数组中的最长公共前缀。如果不存在公共前缀，返回空字符串 <code>&quot;&quot;</code>。</p>
<ul>
<li><strong>输入:</strong> [“flower”,”flow”,”flight”]    <strong>输出:</strong> “fl”</li>
<li><strong>输入:</strong> [“dog”,”racecar”,”car”]      <strong>输出:</strong> “”</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"flower"</span>, <span class="string">"flow"</span>, <span class="string">"flight"</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">longestCommonPrefix</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> firstStr = arr[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; firstStr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (firstStr[i] !== arr[j][i]) &#123;</span><br><span class="line">                <span class="keyword">return</span> result</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        result += firstStr[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(longestCommonPrefix(arr))</span><br></pre></td></tr></table></figure>
<h3 id="生成指定长度的随机字母数字字符串"><a href="#生成指定长度的随机字母数字字符串" class="headerlink" title="生成指定长度的随机字母数字字符串"></a>生成指定长度的随机字母数字字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomStr</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++ ) &#123;</span><br><span class="line">        str += <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substring(<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str.substring(<span class="number">0</span>, len)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="判断数组的方法"><a href="#判断数组的方法" class="headerlink" title="判断数组的方法"></a>判断数组的方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(arr) === <span class="string">'[object Array]'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.isArray(arr)</span><br><span class="line"></span><br><span class="line">arr.constructor === <span class="built_in">Array</span> <span class="comment">// 前提是保证 constructor 不会被更改</span></span><br><span class="line"><span class="comment">// 不能使用 typeof 因为 它返回的是个 'object'</span></span><br></pre></td></tr></table></figure>
<h3 id="JS数组去重"><a href="#JS数组去重" class="headerlink" title="JS数组去重"></a>JS数组去重</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="string">"1"</span>, <span class="string">"1"</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, &#123;&#125;, <span class="literal">NaN</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：indexOf去重（无法对 对象，NaN 识别去重）</span></span><br><span class="line"><span class="comment">// → indexOf 不认 NaN，遇到NaN就返回 -1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myDistinct</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (result.indexOf(arr[i]) === <span class="number">-1</span>) &#123;</span><br><span class="line">            result.push(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回数组：[ 1, '1', NaN, NaN, &#123;&#125;, &#123;&#125;, NaN ]</span></span><br><span class="line"><span class="comment">// 原数组：[ 1, 1, '1', '1', NaN, NaN, &#123;&#125;, &#123;&#125;, NaN ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：filter + indexOf（对 对象 和 NaN 无效）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myDistinct</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = arr.filter(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 重复的值的索引肯定大于第一次出现这个值的索引，不会被返回</span></span><br><span class="line">        <span class="keyword">return</span> arr.indexOf(item) === index</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回数组：[ 1, '1', &#123;&#125;, &#123;&#125; ]</span></span><br><span class="line"><span class="comment">// 原数组：[ 1, 1, '1', '1', NaN, NaN, &#123;&#125;, &#123;&#125;, NaN ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3：filter 升级版（解决了 对象 和 NaN 的问题）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myDistinct</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 由于对象的键值只能是字符串，导致 1 和 '1' 被认为是相同的值，所以下方使用 typeof item + item 拼成字符串作为 key 值来避免这个问题</span></span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)) </span><br><span class="line">              ? <span class="literal">false</span> </span><br><span class="line">              : obj[<span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)] = <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回数组：[ 1, '1', NaN, &#123;&#125; ]</span></span><br><span class="line"><span class="comment">// 原数组：[ 1, 1, '1', '1', NaN, NaN, &#123;&#125;, &#123;&#125;, NaN ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法4：for循环（解决了 对象 和 NaN 的问题）</span></span><br><span class="line">~<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="string">"1"</span>, <span class="string">"1"</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, &#123;&#125;, <span class="literal">NaN</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> prop = <span class="built_in">Array</span>.prototype</span><br><span class="line">    prop.myDistinct = <span class="function"><span class="keyword">function</span> <span class="title">myDistinct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> hash = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> temp = <span class="keyword">typeof</span> <span class="keyword">this</span>[i] + <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>[i])</span><br><span class="line">            <span class="keyword">if</span> (hash[temp]) &#123;</span><br><span class="line">                <span class="keyword">this</span>[i] = <span class="keyword">this</span>[<span class="keyword">this</span>.length - <span class="number">1</span>]</span><br><span class="line">                <span class="keyword">this</span>.length--</span><br><span class="line">                i--</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            hash[temp] = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(arr.myDistinct())</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<h3 id="两个数组比较，判断是否有相同元素（交集）"><a href="#两个数组比较，判断是否有相同元素（交集）" class="headerlink" title="两个数组比较，判断是否有相同元素（交集）"></a>两个数组比较，判断是否有相同元素（交集）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="literal">NaN</span>]</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="literal">NaN</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：filter + indexOf（支持 NaN）</span></span><br><span class="line"><span class="keyword">var</span> c = a.filter(<span class="function"><span class="params">v</span> =&gt;</span> b.indexOf(v) &gt; <span class="number">-1</span>) <span class="comment">// []</span></span><br><span class="line"><span class="keyword">var</span> aHasNaN = a.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">isNaN</span>(v))</span><br><span class="line"><span class="keyword">var</span> bHasNaN = b.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">isNaN</span>(v))</span><br><span class="line"><span class="keyword">var</span> c = a.filter(<span class="function"><span class="params">v</span> =&gt;</span> b.indexOf(v) &gt; <span class="number">-1</span>)</span><br><span class="line">          .concat(aHasNaN &amp;&amp; bHasNaN ? [<span class="literal">NaN</span>] : [])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 若下面 a、b 情况，上面方法会导致结果为 [2, 2]，但按正常逻辑预期应该是 [2] )</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="literal">NaN</span>]</span><br><span class="line"><span class="keyword">var</span> b = [<span class="number">2</span>, <span class="literal">NaN</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aHasNaN = a.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">isNaN</span>(v))</span><br><span class="line"><span class="keyword">var</span> bHasNaN = b.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">isNaN</span>(v))</span><br><span class="line"><span class="keyword">return</span> a.filter(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> index = b.indexOf(v)</span><br><span class="line">        <span class="keyword">if</span> (index &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">            b.splice(index, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).concat(aHasNaN &amp;&amp; bHasNaN ? [<span class="literal">NaN</span>] : [])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：es7 includes</span></span><br><span class="line"><span class="keyword">var</span> c = a.filter(<span class="function"><span class="params">v</span> =&gt;</span> b.includes(v))</span><br></pre></td></tr></table></figure>
<h3 id="如何实现数组的随机排序？"><a href="#如何实现数组的随机排序？" class="headerlink" title="如何实现数组的随机排序？"></a>如何实现数组的随机排序？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：随机交换数组内的元素</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">result</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="comment">// 随机索引【Math.random()返回一个浮点,  伪随机数在范围[0，1)】</span></span><br><span class="line">        <span class="keyword">let</span> randomIndex = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * arr.length)</span><br><span class="line">        <span class="comment">// 存下当前正常索引值对应的数字</span></span><br><span class="line">        <span class="keyword">let</span> curNum = arr[i]</span><br><span class="line">        <span class="comment">// 将其重新赋值为随机索引对应的数字</span></span><br><span class="line">        arr[i] = arr[randomIndex]</span><br><span class="line">        <span class="comment">// 将随机索引对应的数字替换为当前正常索引值对应的数字</span></span><br><span class="line">        arr[randomIndex] = curNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：sort() 可以调用一个函数做为参数，如果这个函数返回的值为负数表示数组中的 a 项排在 b 项前</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">.5</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure>
<h3 id="找出正数组中的最大差值"><a href="#找出正数组中的最大差值" class="headerlink" title="找出正数组中的最大差值"></a>找出正数组中的最大差值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>,<span class="number">5</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]; <span class="comment">// 11-5=6</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMaxProfit</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> min = max = arr[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.length; i++) &#123;</span><br><span class="line">    min = min &lt;= arr[i] ? min : arr[i];</span><br><span class="line">    max = max &gt;= arr[i] ? max : arr[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.abs(max - min);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="从排序数组中删除重复项"><a href="#从排序数组中删除重复项" class="headerlink" title="从排序数组中删除重复项"></a>从排序数组中删除重复项</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 若 nums = [1,1,2], 则函数应返回长度 2, 并且原数组 nums 的前两个元素被修改为 1, 2。</span></span><br><span class="line"><span class="comment">// 若 nums = [0,0,1,1,1,2,2,3,3,4], 则返回 5, 并且原数组被修改为 0, 1, 2, 3, 4。</span></span><br><span class="line"><span class="keyword">var</span> nums = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeDuplicates</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i - <span class="number">1</span>] === nums[i]) &#123;</span><br><span class="line">      nums.splice(i - <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">      i--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> nums.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="找出数组中出现次数最多的元素，并给出其出现过的位置"><a href="#找出数组中出现次数最多的元素，并给出其出现过的位置" class="headerlink" title="找出数组中出现次数最多的元素，并给出其出现过的位置"></a>找出数组中出现次数最多的元素，并给出其出现过的位置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">1</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bestItem, indexs = [], obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> item = arr[i].toString()</span><br><span class="line">        obj[item] ? obj[item].push(i) : obj[item] = [].concat([i])</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> tempArr = <span class="built_in">Object</span>.entries(obj)</span><br><span class="line">    bestItem = <span class="built_in">parseInt</span>(tempArr[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line">    indexs = tempArr[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> tempArr) &#123;</span><br><span class="line">        <span class="keyword">if</span> (indexs.length &lt; value.length) &#123;</span><br><span class="line">            bestItem = <span class="built_in">parseInt</span>(key)</span><br><span class="line">            indexs = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; bestItem, indexs &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn(arr))</span><br></pre></td></tr></table></figure>
<h3 id="将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组"><a href="#将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组" class="headerlink" title="将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组"></a>将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组</h3><blockquote>
<p>已知如下数组：</p>
<p>var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];</p>
<p>编写一个程序将数组扁平化去并除其中重复部分数据，最终得到一个升序且不重复的数组</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="comment">// 扁平化数组</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.flat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].concat(...this.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item) ? item.flat() : [item]))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 数组去重</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [...new <span class="built_in">Set</span>(<span class="keyword">this</span>)]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 数组排序</span></span><br><span class="line"><span class="keyword">const</span> sort = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat().unique().sort(sort))</span><br><span class="line"></span><br><span class="line"><span class="comment">// ===========================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.flat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.toString().split(<span class="string">','</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.filter(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> tempItem = <span class="keyword">typeof</span> item + <span class="built_in">JSON</span>.stringify(item)</span><br><span class="line">    <span class="keyword">return</span> obj.hasOwnProperty(tempItem) ?</span><br><span class="line">      <span class="literal">false</span> :</span><br><span class="line">    	obj[tempItem] = <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> sort = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat().unique().sort(sort))</span><br></pre></td></tr></table></figure>
<h3 id="使用迭代的方式实现-flatten-函数"><a href="#使用迭代的方式实现-flatten-函数" class="headerlink" title="使用迭代的方式实现 flatten 函数"></a>使用迭代的方式实现 flatten 函数</h3><blockquote>
<p>迭代实现</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, [<span class="number">6</span>, <span class="number">7</span>], <span class="number">8</span>], <span class="number">9</span>, <span class="number">10</span>, [<span class="number">11</span>, [<span class="number">12</span>, <span class="number">13</span>]]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.some(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">Array</span>.isArray(v))) &#123;</span><br><span class="line">     arr = [].concat(...arr)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>递归实现</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [].concat(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">Array</span>.isArray(v) ? flatten(v) : [v]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>字符串转换</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.join(<span class="string">','</span>).split(<span class="string">','</span>).map(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">Number</span>(v))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="买卖股票的最佳时机"><a href="#买卖股票的最佳时机" class="headerlink" title="买卖股票的最佳时机"></a>买卖股票的最佳时机</h3><p>给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。</p>
<p>设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。</p>
<p><strong>注意</strong>：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。</p>
<p>输入: [7,1,5,3,6,4]         输出: 7</p>
<p>解释: 在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6-3 = 3 。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">7</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxProfit</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> income = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> gap = arr[i] - arr[i - <span class="number">1</span>] <span class="comment">// 后一个与前一个比较，大于零则赚</span></span><br><span class="line">        <span class="keyword">if</span> (gap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            income += gap</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> income</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(maxProfit(arr))</span><br></pre></td></tr></table></figure>
<h3 id="旋转数组"><a href="#旋转数组" class="headerlink" title="旋转数组"></a>旋转数组</h3><p>给定一个数组，将数组中的元素向右移动 k 个位置，其中 k 是非负数。</p>
<p>输入: [1,2,3,4,5,6,7] 和 k = 3          输出: [5,6,7,1,2,3,4]</p>
<p>解释:</p>
<p>向右旋转 1 步: [7,1,2,3,4,5,6]</p>
<p>向右旋转 2 步: [6,7,1,2,3,4,5]</p>
<p>向右旋转 3 步: [5,6,7,1,2,3,4]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rotate</span>(<span class="params">arr, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> len = arr.length</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> temp = arr.pop()</span><br><span class="line">        arr.unshift(temp)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(rotate(arr, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h3 id="判断数组是否存在重复"><a href="#判断数组是否存在重复" class="headerlink" title="判断数组是否存在重复"></a>判断数组是否存在重复</h3><p>给定一个整数数组，判断是否存在重复元素。</p>
<p>如果任何值在数组中出现至少两次，函数返回 true。如果数组中每个元素都不相同，则返回 false。</p>
<p>输入: [1,2,3,1]        输出: true</p>
<p>输入: [1,2,3,4]        输出: false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">containsDuplicate</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj[arr[i]]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            obj[arr[i]] = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">containsDuplicate</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [...new <span class="built_in">Set</span>(arr)].length !== arr.length</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(containsDuplicate(arr))</span><br></pre></td></tr></table></figure>
<h3 id="找出只出现一次的数字"><a href="#找出只出现一次的数字" class="headerlink" title="找出只出现一次的数字"></a>找出只出现一次的数字</h3><p>给定一个非空整数数组，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singleNumber</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tempArr = arr</span><br><span class="line">    tempArr.sort()</span><br><span class="line">    <span class="keyword">var</span> onceNumber = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = tempArr.length - <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (tempArr[i] !== tempArr[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            onceNumber = tempArr[i]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ++i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 有可能排序后最后一个才是单着的数字，所以直接赋值为数组最后一个值</span></span><br><span class="line">    <span class="keyword">return</span> onceNumber !== <span class="literal">null</span> ? onceNumber : tempArr[tempArr.length - <span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">singleNumber</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> a = [...new <span class="built_in">Set</span>(arr)].reduce(<span class="function">(<span class="params">total, cur</span>) =&gt;</span> total + cur, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> b = arr.reduce(<span class="function">(<span class="params">total, cur</span>) =&gt;</span> total + cur, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * a - b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(singleNumber(arr))</span><br></pre></td></tr></table></figure>
<h3 id="加一"><a href="#加一" class="headerlink" title="加一"></a>加一</h3><p>给定一个由<strong>整数</strong>组成的<strong>非空</strong>数组所表示的非负整数，在该数的基础上加一。</p>
<p>最高位数字存放在数组的首位， 数组中每个元素只存储一个数字。</p>
<p>你可以假设除了整数 0 之外，这个整数不会以零开头。</p>
<p><strong>示例 1:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: [1,2,3]</span><br><span class="line">输出: [1,2,4]</span><br><span class="line">解释: 输入数组表示数字 123。</span><br></pre></td></tr></table></figure>
<p><strong>示例 2:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入: [4,3,2,1]</span><br><span class="line">输出: [4,3,2,2]</span><br><span class="line">解释: 输入数组表示数字 4321。</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>] <span class="comment">// 预期：[1, 0, 0, 0]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusOne</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = arr.length - <span class="number">1</span></span><br><span class="line">    <span class="comment">// 从末尾往前倒</span></span><br><span class="line">    <span class="keyword">while</span> (count &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="comment">// 只要当前位+1大于9，就把当前位置为0，count--</span></span><br><span class="line">        <span class="keyword">if</span> (arr[count] + <span class="number">1</span> &gt; <span class="number">9</span>) &#123;</span><br><span class="line">            arr[count] = <span class="number">0</span></span><br><span class="line">            count--</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 一旦当前位+1不大于9，就放心+1，且直接退出，不用再算更高位的了</span></span><br><span class="line">            arr[count]++</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果while后，第一位还是0，证明这个数组所有数字都为9.这个时候往数组最前面加个1就好</span></span><br><span class="line">    <span class="keyword">if</span> (arr[<span class="number">0</span>] === <span class="number">0</span>) &#123;</span><br><span class="line">        arr.unshift(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(plusOne(arr))</span><br></pre></td></tr></table></figure>
<h3 id="移动零"><a href="#移动零" class="headerlink" title="移动零"></a>移动零</h3><p>给定一个数组 <code>nums</code>，编写一个函数将所有 <code>0</code> 移动到数组的末尾，同时保持非零元素的相对顺序。</p>
<p><strong>示例:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: [0,1,0,3,12]</span><br><span class="line">输出: [1,3,12,0,0]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">12</span>] <span class="comment">// 预期：[ 1, 3, 12, 0, 0 ]</span></span><br><span class="line"><span class="keyword">var</span> moveZeroes = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 长度提取出来</span></span><br><span class="line">    <span class="keyword">var</span> len = nums.length</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="comment">// 从头往后遍历，遇到0则删掉追放到尾部，</span></span><br><span class="line">        <span class="comment">// 同时让i--，因为头部删了个0；同时len--，因为不再判断追加后的</span></span><br><span class="line">        <span class="keyword">if</span> (nums[i] === <span class="number">0</span>) &#123;</span><br><span class="line">            nums.splice(i, <span class="number">1</span>)</span><br><span class="line">            nums.push(<span class="number">0</span>)</span><br><span class="line">            i--</span><br><span class="line">            len--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(moveZeroes(arr))</span><br></pre></td></tr></table></figure>
<h3 id="两数之和"><a href="#两数之和" class="headerlink" title="两数之和"></a>两数之和</h3><p>给定一个整数数组 <code>nums</code> 和一个目标值 <code>target</code>，请你在该数组中找出和为目标值的那 <strong>两个</strong> 整数，并返回他们的数组下标。</p>
<p>你可以假设每种输入只会对应一个答案。但是，你不能重复利用这个数组中同样的元素。</p>
<p><strong>示例:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">给定 nums = [2, 7, 11, 15], target = 9</span><br><span class="line"></span><br><span class="line">因为 nums[0] + nums[1] = 2 + 7 = 9</span><br><span class="line">所以返回 [0, 1]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nums = [<span class="number">2</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">15</span>], target = <span class="number">9</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">twoSum</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> num = nums[i]</span><br><span class="line">    <span class="comment">// 第二个数索引</span></span><br><span class="line">    <span class="keyword">const</span> targetIndex = nums.indexOf(target - num)</span><br><span class="line">    <span class="comment">// 确保存在第二个数，且不为当前遍历的数</span></span><br><span class="line">    <span class="keyword">if</span> (targetIndex &gt; <span class="number">-1</span> &amp;&amp; targetIndex !== i) &#123;</span><br><span class="line">      <span class="keyword">return</span> [i, targetIndex]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(twoSum(nums, target))</span><br></pre></td></tr></table></figure>
<h3 id="旋转图像"><a href="#旋转图像" class="headerlink" title="旋转图像"></a>旋转图像</h3><p>给定一个 <em>n</em> × <em>n</em> 的二维矩阵表示一个图像。</p>
<p>将图像顺时针旋转 90 度。</p>
<p><strong>说明：</strong></p>
<p>你必须在<strong>原地</strong>旋转图像，这意味着你需要直接修改输入的二维矩阵。<strong>请不要</strong>使用另一个矩阵来旋转图像。</p>
<p><strong>示例 1:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">给定 matrix = </span><br><span class="line">[</span><br><span class="line">  [1,2,3],</span><br><span class="line">  [4,5,6],</span><br><span class="line">  [7,8,9]</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">原地旋转输入矩阵，使其变为:</span><br><span class="line">[</span><br><span class="line">  [7,4,1],</span><br><span class="line">  [8,5,2],</span><br><span class="line">  [9,6,3]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>示例 2:</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">给定 matrix =</span><br><span class="line">[</span><br><span class="line">  [ 5, 1, 9,11],</span><br><span class="line">  [ 2, 4, 8,10],</span><br><span class="line">  [13, 3, 6, 7],</span><br><span class="line">  [15,14,12,16]</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">原地旋转输入矩阵，使其变为:</span><br><span class="line">[</span><br><span class="line">  [15,13, 2, 5],</span><br><span class="line">  [14, 3, 4, 1],</span><br><span class="line">  [12, 6, 8, 9],</span><br><span class="line">  [16, 7,10,11]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> matrix = [</span><br><span class="line">    [<span class="number">5</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">11</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">10</span>],</span><br><span class="line">    [<span class="number">13</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">    [<span class="number">15</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">16</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rotate</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">            <span class="keyword">var</span> tempArr = arr[j][i]</span><br><span class="line">            arr[j][i] = arr[i][j]</span><br><span class="line">            arr[i][j] = tempArr</span><br><span class="line">        &#125;</span><br><span class="line">        arr[i].reverse()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(rotate(matrix))</span><br></pre></td></tr></table></figure>
<h3 id="如何将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为『12-000-000-11』？"><a href="#如何将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为『12-000-000-11』？" class="headerlink" title="如何将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为『12,000,000.11』？"></a>如何将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为『12,000,000.11』？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">12000000.11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：利用 toLocaleString() 返回某语言系统下数字的表示字符串 IE6+</span></span><br><span class="line">num.toLocaleString()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toThousands</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> num !== <span class="string">'number'</span>) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="comment">// 判断 num 是否小于 0 ，小于则设 flag 为 "-" 并且把 num 转为绝对值</span></span><br><span class="line">    <span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        flag = <span class="string">"-"</span></span><br><span class="line">        num = <span class="built_in">Math</span>.abs(num)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 转为数组 e.g. [ '12000000', '11' ]</span></span><br><span class="line">    <span class="keyword">var</span> arr = num.toString().split(<span class="string">"."</span>)</span><br><span class="line">    <span class="comment">// 分别把「.」左边和右边存起来</span></span><br><span class="line">    <span class="keyword">var</span> left = [...arr[<span class="number">0</span>]]</span><br><span class="line">    <span class="keyword">var</span> right = <span class="string">""</span></span><br><span class="line">    <span class="comment">// 如果 num 不是个整数的情况</span></span><br><span class="line">    <span class="keyword">if</span> (arr.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        right = <span class="string">"."</span> + arr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> count = left.length - <span class="number">1</span></span><br><span class="line">    <span class="comment">// 操作左边整数部分，逆向遍历并且逢3前面加个「,」 ，最后 i-1</span></span><br><span class="line">    <span class="keyword">while</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// [1,2,0,0,0,0]</span></span><br><span class="line">        <span class="comment">// 例如如果数组长度为6，则一开始 count=5 ，不加</span></span><br><span class="line">        <span class="comment">// count=3 时，就需要在前面加个「,」</span></span><br><span class="line">        <span class="keyword">if</span> (count % <span class="number">3</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            left.splice(-count, <span class="number">0</span>, <span class="string">','</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        count--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 正负符号 + 左边 + 小数点和右边</span></span><br><span class="line">    <span class="keyword">return</span> flag + left.join(<span class="string">""</span>) + right</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3：正则</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toThousands</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num &amp;&amp; num</span><br><span class="line">    .toString()</span><br><span class="line">    .replace(<span class="regexp">/(\d)(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">1</span>, $<span class="number">2</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $<span class="number">2</span> + <span class="string">','</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="两个数组合并成一个数组"><a href="#两个数组合并成一个数组" class="headerlink" title="两个数组合并成一个数组"></a>两个数组合并成一个数组</h3><p>请把两个数组 <code>[&#39;A1&#39;, &#39;A2&#39;, &#39;B1&#39;, &#39;B2&#39;, &#39;C1&#39;, &#39;C2&#39;, &#39;D1&#39;, &#39;D2&#39;]</code> 和 <code>[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;]</code>，合并为 <code>[&#39;A1&#39;, &#39;A2&#39;, &#39;A&#39;, &#39;B1&#39;, &#39;B2&#39;, &#39;B&#39;, &#39;C1&#39;, &#39;C2&#39;, &#39;C&#39;, &#39;D1&#39;, &#39;D2&#39;, &#39;D&#39;]</code>。</p>
<blockquote>
<p>考察点：假设有一种情况，让你在一个列表中插入一个广告，不光是数组，对象依然有这种需求，这道题其实就是平常经常需要用到的一个小功能。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="string">"A1"</span>, <span class="string">"A2"</span>, <span class="string">"B1"</span>, <span class="string">"B2"</span>, <span class="string">"C1"</span>, <span class="string">"C2"</span>, <span class="string">"D1"</span>, <span class="string">"D2"</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">	[...arr1, ...arr2].sort(<span class="function">(<span class="params">v2, v1</span>) =&gt;</span> (</span><br><span class="line">  	v2.codePointAt(<span class="number">0</span>) - v1.codePointAt(<span class="number">0</span>) ||</span><br><span class="line">    v1.length - v2.length ||</span><br><span class="line">    v2.codePointAt(<span class="number">1</span>) - v1.codePointAt(<span class="number">1</span>)</span><br><span class="line">  ))</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个条件v2.codePointAt(0) - v1.codePointAt(0) 保证了所有已A开头的字符串会放在最前边，然后依次是B和C。</li>
<li>第二个条件v1.length - v2.length保证A会被放在A1和A2之后。</li>
<li>第三个条件v2.codePointAt(1) - v1.codePointAt(1)保证了A1会被放在A2前边。</li>
</ul>
<p>这是我挑的一个比较好的答案，更多解法可<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/39" target="_blank" rel="noopener">在此</a>查看</p>
<h2 id="随机数-数字"><a href="#随机数-数字" class="headerlink" title="随机数 / 数字"></a>随机数 / 数字</h2><h3 id="如何获取0-9的随机数"><a href="#如何获取0-9的随机数" class="headerlink" title="如何获取0-9的随机数"></a>如何获取0-9的随机数</h3><ul>
<li><strong>Math.round(num)</strong>：将 <strong>num</strong> 四舍五入取整</li>
<li><strong>Math.floor(num)</strong>：将 <strong>num</strong> 向下取整，即返回 <strong>num</strong> 的整数部分。当然我们也可以使用 <strong>parseInt()</strong> 方法代替。</li>
<li><strong>Math.ceil(num)</strong>：向上取整</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (min, max)：</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random() * (max - min - <span class="number">2</span>) + min + <span class="number">1</span>)</span><br><span class="line"><span class="comment">// [min, max]：</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random() * (max - min) + min)</span><br><span class="line"><span class="comment">// (n, m]：</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random() * (max - min) + min)</span><br><span class="line"><span class="comment">// [n, m)：</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min) + min)</span><br></pre></td></tr></table></figure>
<h3 id="随机获取数组中的元素"><a href="#随机获取数组中的元素" class="headerlink" title="随机获取数组中的元素"></a>随机获取数组中的元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"前端"</span>, <span class="string">"后端"</span>, <span class="string">"全栈"</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * arr.length)]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> (i&lt;<span class="number">10</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fn(arr))</span><br><span class="line">    i++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="打乱数组顺序"><a href="#打乱数组顺序" class="headerlink" title="打乱数组顺序"></a>打乱数组顺序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="string">'a'</span>,<span class="string">'dsfs'</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="string">'v'</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> randomIndex = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * arr.length)</span><br><span class="line">    <span class="keyword">var</span> temp = arr[i]</span><br><span class="line">    arr[i] = arr[randomIndex]</span><br><span class="line">    arr[randomIndex] = temp</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="保留指定小数位"><a href="#保留指定小数位" class="headerlink" title="保留指定小数位"></a>保留指定小数位</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num =<span class="number">4.345678</span></span><br><span class="line">num = num.toFixed(<span class="number">4</span>) <span class="comment">// 4.3457 第四位小数位以四舍五入计算</span></span><br></pre></td></tr></table></figure>
<h3 id="前端价格展示，保留2位小数。位数不够补零"><a href="#前端价格展示，保留2位小数。位数不够补零" class="headerlink" title="前端价格展示，保留2位小数。位数不够补零"></a>前端价格展示，保留2位小数。位数不够补零</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">priceFormat</span>(<span class="params">price</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseFloat</span>(<span class="built_in">Math</span>.round(price * <span class="number">100</span>) / <span class="number">100</span>).toFixed(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="如何将字符串转化为数字，例如’12-3b’？"><a href="#如何将字符串转化为数字，例如’12-3b’？" class="headerlink" title="如何将字符串转化为数字，例如’12.3b’？"></a>如何将字符串转化为数字，例如’12.3b’？</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'12.3b'</span>)</span><br><span class="line"><span class="comment">// 12.3</span></span><br></pre></td></tr></table></figure>
<h3 id="如何检查一个数字是否为整数？"><a href="#如何检查一个数字是否为整数？" class="headerlink" title="如何检查一个数字是否为整数？"></a>如何检查一个数字是否为整数？</h3><blockquote>
<p>将它对 1 进行取模，看看是否有余数。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInt</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num % <span class="number">1</span> === <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isInt(<span class="number">4</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isInt(<span class="number">12.2</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(isInt(<span class="number">0.3</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="为什么0-1-0-2不等于0-3？在什么场景下遇到这个问题，如何解决？"><a href="#为什么0-1-0-2不等于0-3？在什么场景下遇到这个问题，如何解决？" class="headerlink" title="为什么0.1+0.2不等于0.3？在什么场景下遇到这个问题，如何解决？"></a>为什么0.1+0.2不等于0.3？在什么场景下遇到这个问题，如何解决？</h3><blockquote>
<p>二进制模拟十进制进行计算时 的精度问题</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：ES6的 Number.EPSILON ，这个值无限接近于0。0.1 + 0.2的精度误差在这个值的范围内</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">numbersEqual</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.abs(a - b) &lt; <span class="built_in">Number</span>.EPSILON</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0.1</span> + <span class="number">0.2</span>, b=<span class="number">0.3</span></span><br><span class="line"><span class="built_in">console</span>.log(numbersEqual(a,b))    <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：parseFloat + 内置函数 toFixed</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatNum</span>(<span class="params">num, fixed = <span class="number">10</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// a.toFixed(fixed) 先转为小数点10位的字符串 "0.3000000000"</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(a.toFixed(fixed)) <span class="comment">// 然后通过parseFloat转为浮点数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0.1</span> + <span class="number">0.2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(formatNum(a)) <span class="comment">//0.3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3：内置函数toPrecision(中文：精确，精度)</span></span><br><span class="line"><span class="comment">// 参数是精度.比如 5.1234 ，传 2 返回 5.1 ，传 1 返回 5 ；0.2 + 0.1 传 2 返回 0.30</span></span><br><span class="line">(<span class="number">0.1</span> + <span class="number">0.2</span>).toPrecision(<span class="number">10</span>) == <span class="number">0.3</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="https://juejin.im/post/5b90e00e6fb9a05cf9080dff" target="_blank" rel="noopener">0.1 + 0.2不等于0.3？为什么JavaScript有这种“骚”操作？</a></li>
<li><a href="https://blog.csdn.net/nineteen73/article/details/51184387" target="_blank" rel="noopener">JavaScript的设计缺陷?浮点运算：0.1 + 0.2 != 0.3</a></li>
</ul>
<h2 id="对象-amp-原型-amp-原型链"><a href="#对象-amp-原型-amp-原型链" class="headerlink" title="对象 &amp; 原型 &amp; 原型链"></a>对象 &amp; 原型 &amp; 原型链</h2><h3 id="写一下浅-深拷贝"><a href="#写一下浅-深拷贝" class="headerlink" title="写一下浅/深拷贝"></a>写一下浅/深拷贝</h3><blockquote>
<p>深拷贝和浅拷贝针对的是引用类型，JS中的变量类型分为值类型（基本类型）和引用类型；对值类型进行复制操作会对值进行一份拷贝，而对引用类型复制，则会进行地址的拷贝，最终两个变量指向同一份数据。对于引用类型，会导致a b指向同一份数据，此时如果对其中一个进行修改，就会影响到另外一个，有时候这可能不是我们想要的结果。</p>
</blockquote>
<h4 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现一个浅拷贝，就是遍历源对象，然后在将对象的属性的属性值都放到一个新对象里就ok了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1：遍历</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> newObj = obj.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    newObj[key] = obj[key]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">b</span>: <span class="string">'bb'</span>, <span class="attr">c</span>: <span class="string">'cc'</span>,  <span class="attr">d</span>: &#123;<span class="attr">e</span>: <span class="string">'ee'</span>&#125;&#125;</span><br><span class="line"><span class="keyword">var</span> b = copy(a)</span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// &#123; b: 'bb', c: 'cc', d: &#123; e: 'ee' &#125; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：原生方法 Object.assign</span></span><br><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">a</span> : <span class="string">'old'</span>, <span class="attr">b</span> : &#123; <span class="attr">c</span> : <span class="string">'old'</span>&#125;&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.assign(&#123;&#125;, a)</span><br><span class="line">b.a = <span class="string">'new'</span></span><br><span class="line">b.b.c = <span class="string">'new'</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// &#123; a: 'old', b: &#123; c: 'new' &#125; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// &#123; a: 'new', b: &#123; c: 'new' &#125; &#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法1：转 JSON 再转回来</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">a</span>: &#123;<span class="attr">name</span>: <span class="string">'小红'</span>&#125;, <span class="attr">b</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj1))</span><br><span class="line">obj1.a.name = <span class="string">'被修改了'</span></span><br><span class="line">obj2   <span class="comment">//&#123;"a":&#123;"name":"小红"&#125;,"b":2&#125;  《---没有被修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON方法的缺点：</span></span><br><span class="line"><span class="comment">//  不能复制 function、正则、Symbol</span></span><br><span class="line"><span class="comment">//  循环引用报错</span></span><br><span class="line"><span class="comment">//  相同的引用会被重复复制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2：递归的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 递归退出条件</span></span><br><span class="line">    <span class="comment">// 拷贝对象不存在或不是数组或不是对象</span></span><br><span class="line">    <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> newObj = obj.constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">            <span class="comment">// 如果是数组或者对象</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span>) &#123;</span><br><span class="line">                <span class="comment">// 递归</span></span><br><span class="line">                newObj[key] = copy(obj[key])</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 否则直接返回</span></span><br><span class="line">                newObj[key] = obj[key]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newObj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> old = &#123; <span class="attr">a</span>: <span class="string">'old'</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="string">'old'</span> &#125; &#125;</span><br><span class="line"><span class="keyword">var</span> newObj = copy(old)</span><br><span class="line">newObj.b.c = <span class="string">'new'</span></span><br><span class="line"><span class="built_in">console</span>.log(old) <span class="comment">// &#123; a: 'old', b: &#123; c: 'old' &#125; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(newObj) <span class="comment">// &#123; a: 'old', b: &#123; c: 'new' &#125; &#125;</span></span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000016970483" target="_blank" rel="noopener">浅探js深拷贝和浅拷贝</a></li>
<li><a href="http://www.cnblogs.com/zhangycun/p/9799787.html" target="_blank" rel="noopener">深拷贝的终极探索</a></li>
</ul>
<h3 id="JavaScript-中，有一个函数，执行时对象查找时，永远不会去查找原型，这个函数是？"><a href="#JavaScript-中，有一个函数，执行时对象查找时，永远不会去查找原型，这个函数是？" class="headerlink" title="JavaScript 中，有一个函数，执行时对象查找时，永远不会去查找原型，这个函数是？"></a>JavaScript 中，有一个函数，执行时对象查找时，永远不会去查找原型，这个函数是？</h3><p><strong>hasOwnProperty</strong></p>
<p>hasOwnProperty 返回一个布尔值，指出一个对象是否具有指定名称的属性。此方法不会检查该对象的原型链中是否具有该属性；该属性必须是对象本身的一个成员。</p>
<p>使用方法： object.hasOwnProperty(proName) 其中参数 object 是必选项，一个对象的实例；proName 是必选项。一个属性名称的字符串值。 如果 object 具有指定名称的属性，那么 JavaScript 中 hasOwnProperty 函数方法返回 true，反之则返回 false。</p>
<h3 id="instanceof-的实现原理"><a href="#instanceof-的实现原理" class="headerlink" title="instanceof 的实现原理"></a>instanceof 的实现原理</h3><blockquote>
<p>思路：只要右边变量的 prototype 在左边变量的原型链上即可。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myInstanceOf</span>(<span class="params">leftValue, rightValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> rightProto = rightValue.prototype <span class="comment">// 取右表达式的 prototype 值</span></span><br><span class="line">    leftValue = leftValue.__proto__ <span class="comment">// 取左表达式的 __proto__ 值</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (leftValue === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (leftValue === rightProto) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        leftValue = leftValue.__proto__</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考：<a href="https://juejin.im/post/5b0b9b9051882515773ae714" target="_blank" rel="noopener">浅谈 instanceof 和 typeof 的实现原理</a></p>
<h3 id="实现一个-new"><a href="#实现一个-new" class="headerlink" title="实现一个 new"></a>实现一个 new</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_new</span>(<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(fn.prototype)</span><br><span class="line">  <span class="keyword">const</span> ret = fn.apply(obj, args)</span><br><span class="line">  <span class="keyword">return</span> ret <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? ret : obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">  <span class="keyword">this</span>.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(_new(Person, <span class="string">'Lance'</span>, <span class="number">19</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Person(<span class="string">'Jerry'</span>, <span class="number">20</span>))</span><br></pre></td></tr></table></figure>
<h3 id="实现一个单例"><a href="#实现一个单例" class="headerlink" title="实现一个单例"></a>实现一个单例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> SingleTest = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _instance = <span class="literal">null</span></span><br><span class="line">    SingleInstance.prototype._init = <span class="function"><span class="keyword">function</span>(<span class="params">ops</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> ops) &#123;</span><br><span class="line">            <span class="keyword">this</span>[i]=ops[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">SingleInstance</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            _instance=<span class="keyword">this</span></span><br><span class="line">        &#125;</span><br><span class="line">        _instance._init(args)</span><br><span class="line">        <span class="keyword">return</span> _instance</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> SingleInstance</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i1=<span class="keyword">new</span> SingleTest(&#123;<span class="attr">name</span>:<span class="string">"lance1"</span>&#125;)</span><br><span class="line"><span class="keyword">var</span> i2=<span class="keyword">new</span> SingleTest(&#123;<span class="attr">name</span>:<span class="string">"lance2"</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(i1===i2)  <span class="comment">// 结果是true</span></span><br><span class="line"><span class="built_in">console</span>.log(i1.name)  <span class="comment">// 结果是escapist3</span></span><br></pre></td></tr></table></figure>
<h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><h3 id="实现一个-sleep-函数"><a href="#实现一个-sleep-函数" class="headerlink" title="实现一个 sleep 函数"></a>实现一个 sleep 函数</h3><p>比如 sleep(1000) 意味着等待1000毫秒，可从 Promise、Generator、Async/Await 等角度实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">delay</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, delay))</span><br><span class="line">sleep(<span class="number">1000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Done'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generator</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">sleepGenerator</span>(<span class="params">delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, delay))</span><br><span class="line">&#125;</span><br><span class="line">sleepGenerator(<span class="number">1000</span>).next().value.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Done'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// async / await</span></span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">delay</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, delay))</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">output</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> sleep(<span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Done'</span>)</span><br><span class="line">&#125;</span><br><span class="line">output()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">cb, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> cb === <span class="string">'function'</span>)</span><br><span class="line">    setTimeout(cb, delay)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">output</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Done'</span>)</span><br><span class="line">&#125;</span><br><span class="line">sleep(output, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Event-Loop-amp-setTimeout"><a href="#Event-Loop-amp-setTimeout" class="headerlink" title="Event Loop &amp; setTimeout"></a>Event Loop &amp; setTimeout</h2><h3 id="setTimeout-的机制"><a href="#setTimeout-的机制" class="headerlink" title="setTimeout 的机制"></a>setTimeout 的机制</h3><p>等到当前脚本的同步任务和 “任务队列” 中已有的事件，全部处理完以后，才会执行 setTimeout 指定的任务。</p>
<p>参考：<a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">JavaScript 运行机制详解：再谈Event Loop</a></p>
<h3 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h3><p>有关 Event Loop 相关的概念和面试题可参考我的博客：<a href="https://evestorm.github.io/posts/10505/">Event Loop 学习笔记</a></p>
<h3 id="自我测验"><a href="#自我测验" class="headerlink" title="自我测验"></a>自我测验</h3><p>上面两篇文章阅读完毕后可以自我测验下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请写出输出内容</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'async1 start'</span>);</span><br><span class="line">    <span class="keyword">await</span> async2();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'async1 end'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'async2'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise1'</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>);</span><br></pre></td></tr></table></figure>
<p>题目出处和答案参考：<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/7" target="_blank" rel="noopener">从一道题浅说 JavaScript 的事件循环</a></p>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><h3 id="getElementsByClassName-和-querySelectorAll-的区别"><a href="#getElementsByClassName-和-querySelectorAll-的区别" class="headerlink" title="getElementsByClassName 和 querySelectorAll 的区别"></a>getElementsByClassName 和 querySelectorAll 的区别</h3><ul>
<li><p>参数上：querySelectorAll 方法接收的参数是一个 CSS 选择符。而 getElementsBy 系列接收的参数只能是单一的 className、tagName 和 name</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c1 = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.b1 .c'</span>)</span><br><span class="line"><span class="keyword">var</span> c2 = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'c'</span>)</span><br><span class="line"><span class="keyword">var</span> c3 = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'b2'</span>)[<span class="number">0</span>].getElementsByClassName(<span class="string">'c'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>返回值上：querySelectorAll 返回的是一个 Static Node List，而 getElementsBy 系列的返回的是一个 Live Node List</p>
</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="https://www.zhihu.com/question/24702250" target="_blank" rel="noopener">querySelectorAll 方法相比 getElementsBy 系列方法有什么区别？</a></li>
<li><a href="https://segmentfault.com/a/1190000008829267" target="_blank" rel="noopener">静态NodeList 和 动态NodeList的区别</a></li>
</ul>
<h3 id="原生-JS-添加类"><a href="#原生-JS-添加类" class="headerlink" title="原生 JS 添加类"></a>原生 JS 添加类</h3><ul>
<li>element.setAttribute(“class”, ‘Lance’)</li>
<li>element.className = “lance awesome”</li>
<li>追加类：element.setAttribute(“class”, element.getAttribute(“class”) + “ “ + “lance”)</li>
</ul>
<h3 id="编写一个可拖拽的-div"><a href="#编写一个可拖拽的-div" class="headerlink" title="编写一个可拖拽的 div"></a>编写一个可拖拽的 div</h3><blockquote>
<p>HTML</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"sw"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>CSS</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#sw</span> &#123; <span class="attribute">position</span>: absolute; &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>JS</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="literal">false</span></span><br><span class="line"><span class="keyword">var</span> position = <span class="literal">null</span></span><br><span class="line"><span class="keyword">var</span> sw = <span class="built_in">document</span>.querySelector(<span class="string">"#sw"</span>)</span><br><span class="line">sw.addEventListener(<span class="string">"mousedown"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    flag = <span class="literal">true</span></span><br><span class="line">    position = [e.clientX, e.clientY]</span><br><span class="line">    <span class="built_in">console</span>.log(e.clientX, e.clientY)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 这里监听 document ，如果监听 sw 则会有快速拖动导致鼠标「脱离」 div 的 bug</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"mousemove"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">var</span> x = e.clientX</span><br><span class="line">    <span class="keyword">var</span> y = e.clientY</span><br><span class="line">    <span class="keyword">var</span> moveX = x - position[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> moveY = y - position[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">var</span> left = <span class="built_in">parseInt</span>(sw.style.left || <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">var</span> top = <span class="built_in">parseInt</span>(sw.style.top || <span class="number">0</span>)</span><br><span class="line">    <span class="comment">// 注意 style.left 带 px 单位</span></span><br><span class="line">    sw.style.left = left + moveX + <span class="string">'px'</span></span><br><span class="line">    sw.style.top = top + moveY + <span class="string">'px'</span></span><br><span class="line">    position = [x, y]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"mouseup"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    flag = <span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="预测执行结果"><a href="#预测执行结果" class="headerlink" title="预测执行结果"></a>预测执行结果</h2><h3 id="下面代码打印结果是什么？为什么"><a href="#下面代码打印结果是什么？为什么" class="headerlink" title="下面代码打印结果是什么？为什么?"></a>下面代码打印结果是什么？为什么?</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  b = <span class="number">20</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>答案：</p>
<ul>
<li>非严格模式：[Function b]</li>
<li>严格模式：<code>Uncaught TypeError: Assignment to constant variable</code></li>
</ul>
<p>解析：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// 内部作用域，会先去查找是有已有变量b的声明，有就直接赋值20，确实有了呀。发现了具名函数 function b()&#123;&#125;，拿此b做赋值；</span></span><br><span class="line">   <span class="comment">// IIFE的函数无法进行赋值（内部机制，类似const定义的常量），所以无效。</span></span><br><span class="line">  <span class="comment">// （这里说的“内部机制”，想搞清楚，需要去查阅一些资料，弄明白IIFE在JS引擎的工作方式，堆栈存储IIFE的方式等）</span></span><br><span class="line">    b = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// [Function b]</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.b); <span class="comment">// 10，不是20</span></span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// 严格模式下能看到错误：Uncaught TypeError: Assignment to constant variable</span></span><br></pre></td></tr></table></figure>
<p>其他情况例子：</p>
<p>有<code>window</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.b = <span class="number">20</span>; </span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// [Function b]</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.b); <span class="comment">// 20是必然的</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>有<code>var</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">20</span>; <span class="comment">// IIFE内部变量</span></span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// 20</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="built_in">window</span>.b); <span class="comment">// 10 </span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/48#issuecomment-472695263" target="_blank" rel="noopener">解析来源 ←</a></p>
<h3 id="输出以下代码执行的结果并解释为什么"><a href="#输出以下代码执行的结果并解释为什么" class="headerlink" title="输出以下代码执行的结果并解释为什么"></a>输出以下代码执行的结果并解释为什么</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="string">'2'</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">'3'</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">'length'</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">'splice'</span>: <span class="built_in">Array</span>.prototype.splice,</span><br><span class="line">    <span class="string">'push'</span>: <span class="built_in">Array</span>.prototype.push</span><br><span class="line">&#125;</span><br><span class="line">obj.push(<span class="number">1</span>)</span><br><span class="line">obj.push(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(obj)</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<p><img src="https://user-images.githubusercontent.com/26674103/55368589-3605a000-5525-11e9-8c20-c5aeea6b1880.png" alt="screenshots"></p>
<p>解析参考：</p>
<blockquote>
<p>结果最后变为一个稀疏数组[,,1,2]。<br>因为在对象中加入splice属性方法，和length属性后。这个对象变成一个类数组。属性名称可转换为数字时，会映射成为索引下标。所以对象实际可这样描述：[,,3,4],然后继续执行length 属性复制，length 原来值为4，length：2 语句将数组截断成为长度为2的数组。此时数组为[,,]。接着push（1）、push (2)。数组追加两个值，[,,1,2]。小菜看法，有错望指正！！！</p>
</blockquote>
<p>参考来源：</p>
<ul>
<li><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/76" target="_blank" rel="noopener">Daily-Interview-Question 第 46 题</a></li>
<li><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/75" target="_blank" rel="noopener">小菜解析</a></li>
</ul>
<h3 id="输出以下代码的执行结果并解释为什么"><a href="#输出以下代码的执行结果并解释为什么" class="headerlink" title="输出以下代码的执行结果并解释为什么"></a>输出以下代码的执行结果并解释为什么</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">n</span>: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a.x = a = &#123;<span class="attr">n</span>: <span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.x)</span><br><span class="line"><span class="built_in">console</span>.log(b.x)</span><br></pre></td></tr></table></figure>
<p>答案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.x   <span class="comment">// --&gt; undefined</span></span><br><span class="line">b.x   <span class="comment">// --&gt; &#123;n: 2&#125;</span></span><br></pre></td></tr></table></figure>
<p>解析：</p>
<ul>
<li>1、优先级。<code>.</code>的优先级高于<code>=</code>，所以先执行<code>a.x</code>，堆内存中的<code>{n: 1}</code>就会变成<code>{n: 1, x: undefined}</code>，改变之后相应的<code>b.x</code>也变化了，因为指向的是同一个对象。</li>
<li>2、赋值操作是<code>从右到左</code>，所以先执行<code>a = {n: 2}</code>，<code>a</code>的引用就被改变了，然后这个返回值又赋值给了<code>a.x</code>，<strong>需要注意</strong>的是这时候<code>a.x</code>是第一步中的<code>{n: 1, x: undefined}</code>那个对象，其实就是<code>b.x</code>，相当于<code>b.x = {n: 2}</code></li>
</ul>
<p>题目来源：<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/93" target="_blank" rel="noopener">Daily-Interview-Question 第53题</a></p>
<h2 id="算法题"><a href="#算法题" class="headerlink" title="算法题"></a>算法题</h2><p>我面的都不是什么大公司，所以很少被问到算法，不过对于前端来说，了解一些基本的算法还是很有必要的，起码最常见的排序算法得掌握，例如冒泡和快排。这部分内容可参考我的博客：</p>
<ul>
<li><a href="https://evestorm.github.io/posts/59937/">常见排序算法</a></li>
</ul>
<h2 id="非常规题"><a href="#非常规题" class="headerlink" title="非常规题"></a>非常规题</h2><h3 id="‘1’-‘2’-‘3’-map-parseInt-的结果"><a href="#‘1’-‘2’-‘3’-map-parseInt-的结果" class="headerlink" title="[‘1’, ‘2’, ‘3’].map(parseInt)的结果"></a>[‘1’, ‘2’, ‘3’].map(parseInt)的结果</h3><p>正确答案：[1, NaN, NaN]</p>
<p>答案解析：<a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/4" target="_blank" rel="noopener">[‘1’, ‘2’, ‘3’].map(parseInt) what &amp; why ?</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Lance 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Lance 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/面试/" rel="tag"><i class="fa fa-tag"></i> 面试</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/49170/" rel="next" title="CSS知识点（面试系列）">
                <i class="fa fa-chevron-left"></i> CSS知识点（面试系列）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/38402/" rel="prev" title="浏览器面试题（面试系列）">
                浏览器面试题（面试系列） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/kitten.jpeg" alt="Lance">
            
              <p class="site-author-name" itemprop="name">Lance</p>
              <p class="site-description motion-element" itemprop="description">前端笔记和心得，包括但不限于：HTML5 CSS3 JavaScript ES6 Vue Webpack...</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">70</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#JS类型相关"><span class="nav-number">1.</span> <span class="nav-text">JS类型相关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#typeof-没定义的变量会报错吗？typeof-let定义了的呢？"><span class="nav-number">1.1.</span> <span class="nav-text">typeof 没定义的变量会报错吗？typeof let定义了的呢？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#typeof-的值有哪些"><span class="nav-number">1.2.</span> <span class="nav-text">typeof 的值有哪些</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#valueOf-和-toString"><span class="nav-number">1.3.</span> <span class="nav-text">valueOf 和 toString</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">2.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#判断一个单词是否是回文"><span class="nav-number">2.1.</span> <span class="nav-text">判断一个单词是否是回文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证回文字符串"><span class="nav-number">2.2.</span> <span class="nav-text">验证回文字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#统计字符串出现最多的字母"><span class="nav-number">2.3.</span> <span class="nav-text">统计字符串出现最多的字母</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串中的第一个唯一字符"><span class="nav-number">2.4.</span> <span class="nav-text">字符串中的第一个唯一字符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#有效的字母异位词"><span class="nav-number">2.5.</span> <span class="nav-text">有效的字母异位词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断一个给定的字符串是否是同构的"><span class="nav-number">2.6.</span> <span class="nav-text">判断一个给定的字符串是否是同构的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#报数"><span class="nav-number">2.7.</span> <span class="nav-text">报数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最长公共前缀"><span class="nav-number">2.8.</span> <span class="nav-text">最长公共前缀</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成指定长度的随机字母数字字符串"><span class="nav-number">2.9.</span> <span class="nav-text">生成指定长度的随机字母数字字符串</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组"><span class="nav-number">3.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#判断数组的方法"><span class="nav-number">3.1.</span> <span class="nav-text">判断数组的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS数组去重"><span class="nav-number">3.2.</span> <span class="nav-text">JS数组去重</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两个数组比较，判断是否有相同元素（交集）"><span class="nav-number">3.3.</span> <span class="nav-text">两个数组比较，判断是否有相同元素（交集）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何实现数组的随机排序？"><span class="nav-number">3.4.</span> <span class="nav-text">如何实现数组的随机排序？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#找出正数组中的最大差值"><span class="nav-number">3.5.</span> <span class="nav-text">找出正数组中的最大差值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从排序数组中删除重复项"><span class="nav-number">3.6.</span> <span class="nav-text">从排序数组中删除重复项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#找出数组中出现次数最多的元素，并给出其出现过的位置"><span class="nav-number">3.7.</span> <span class="nav-text">找出数组中出现次数最多的元素，并给出其出现过的位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组"><span class="nav-number">3.8.</span> <span class="nav-text">将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用迭代的方式实现-flatten-函数"><span class="nav-number">3.9.</span> <span class="nav-text">使用迭代的方式实现 flatten 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#买卖股票的最佳时机"><span class="nav-number">3.10.</span> <span class="nav-text">买卖股票的最佳时机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#旋转数组"><span class="nav-number">3.11.</span> <span class="nav-text">旋转数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断数组是否存在重复"><span class="nav-number">3.12.</span> <span class="nav-text">判断数组是否存在重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#找出只出现一次的数字"><span class="nav-number">3.13.</span> <span class="nav-text">找出只出现一次的数字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加一"><span class="nav-number">3.14.</span> <span class="nav-text">加一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动零"><span class="nav-number">3.15.</span> <span class="nav-text">移动零</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两数之和"><span class="nav-number">3.16.</span> <span class="nav-text">两数之和</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#旋转图像"><span class="nav-number">3.17.</span> <span class="nav-text">旋转图像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何将浮点数点左边的数每三位添加一个逗号，如12000000-11转化为『12-000-000-11』？"><span class="nav-number">3.18.</span> <span class="nav-text">如何将浮点数点左边的数每三位添加一个逗号，如12000000.11转化为『12,000,000.11』？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两个数组合并成一个数组"><span class="nav-number">3.19.</span> <span class="nav-text">两个数组合并成一个数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机数-数字"><span class="nav-number">4.</span> <span class="nav-text">随机数 / 数字</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#如何获取0-9的随机数"><span class="nav-number">4.1.</span> <span class="nav-text">如何获取0-9的随机数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#随机获取数组中的元素"><span class="nav-number">4.2.</span> <span class="nav-text">随机获取数组中的元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打乱数组顺序"><span class="nav-number">4.3.</span> <span class="nav-text">打乱数组顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#保留指定小数位"><span class="nav-number">4.4.</span> <span class="nav-text">保留指定小数位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#前端价格展示，保留2位小数。位数不够补零"><span class="nav-number">4.5.</span> <span class="nav-text">前端价格展示，保留2位小数。位数不够补零</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何将字符串转化为数字，例如’12-3b’？"><span class="nav-number">4.6.</span> <span class="nav-text">如何将字符串转化为数字，例如’12.3b’？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何检查一个数字是否为整数？"><span class="nav-number">4.7.</span> <span class="nav-text">如何检查一个数字是否为整数？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么0-1-0-2不等于0-3？在什么场景下遇到这个问题，如何解决？"><span class="nav-number">4.8.</span> <span class="nav-text">为什么0.1+0.2不等于0.3？在什么场景下遇到这个问题，如何解决？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象-amp-原型-amp-原型链"><span class="nav-number">5.</span> <span class="nav-text">对象 &amp; 原型 &amp; 原型链</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#写一下浅-深拷贝"><span class="nav-number">5.1.</span> <span class="nav-text">写一下浅/深拷贝</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#浅拷贝"><span class="nav-number">5.1.1.</span> <span class="nav-text">浅拷贝</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#深拷贝"><span class="nav-number">5.1.2.</span> <span class="nav-text">深拷贝</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript-中，有一个函数，执行时对象查找时，永远不会去查找原型，这个函数是？"><span class="nav-number">5.2.</span> <span class="nav-text">JavaScript 中，有一个函数，执行时对象查找时，永远不会去查找原型，这个函数是？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#instanceof-的实现原理"><span class="nav-number">5.3.</span> <span class="nav-text">instanceof 的实现原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个-new"><span class="nav-number">5.4.</span> <span class="nav-text">实现一个 new</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个单例"><span class="nav-number">5.5.</span> <span class="nav-text">实现一个单例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ES6"><span class="nav-number">6.</span> <span class="nav-text">ES6</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实现一个-sleep-函数"><span class="nav-number">6.1.</span> <span class="nav-text">实现一个 sleep 函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-Loop-amp-setTimeout"><span class="nav-number">7.</span> <span class="nav-text">Event Loop &amp; setTimeout</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#setTimeout-的机制"><span class="nav-number">7.1.</span> <span class="nav-text">setTimeout 的机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Event-Loop"><span class="nav-number">7.2.</span> <span class="nav-text">Event Loop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自我测验"><span class="nav-number">7.3.</span> <span class="nav-text">自我测验</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM"><span class="nav-number">8.</span> <span class="nav-text">DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#getElementsByClassName-和-querySelectorAll-的区别"><span class="nav-number">8.1.</span> <span class="nav-text">getElementsByClassName 和 querySelectorAll 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原生-JS-添加类"><span class="nav-number">8.2.</span> <span class="nav-text">原生 JS 添加类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编写一个可拖拽的-div"><span class="nav-number">8.3.</span> <span class="nav-text">编写一个可拖拽的 div</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#预测执行结果"><span class="nav-number">9.</span> <span class="nav-text">预测执行结果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#下面代码打印结果是什么？为什么"><span class="nav-number">9.1.</span> <span class="nav-text">下面代码打印结果是什么？为什么?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输出以下代码执行的结果并解释为什么"><span class="nav-number">9.2.</span> <span class="nav-text">输出以下代码执行的结果并解释为什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输出以下代码的执行结果并解释为什么"><span class="nav-number">9.3.</span> <span class="nav-text">输出以下代码的执行结果并解释为什么</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#算法题"><span class="nav-number">10.</span> <span class="nav-text">算法题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#非常规题"><span class="nav-number">11.</span> <span class="nav-text">非常规题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#‘1’-‘2’-‘3’-map-parseInt-的结果"><span class="nav-number">11.1.</span> <span class="nav-text">[‘1’, ‘2’, ‘3’].map(parseInt)的结果</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lance</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">129.2k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      人阅读
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.12.0/dist/av-min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/valine@1.3.6/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: true,
        notify: true,
        appId: 'eMlA1yfOVSu3St1f6l2XzQqC-gzGzoHsz',
        appKey: 'TOv5VcioO0ijgjrHfGILweOR',
        placeholder: '欢迎交流讨论...',
        avatar:'mm',
        guest_info:guest,
        pageSize:'15' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  <!-- 代码块复制功能 -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
</body>
</html>
